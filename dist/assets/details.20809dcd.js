var se=Object.defineProperty,ne=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var B=(l,o,s)=>o in l?se(l,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[o]=s,y=(l,o)=>{for(var s in o||(o={}))le.call(o,s)&&B(l,s,o[s]);if(_)for(var s of _(o))ce.call(o,s)&&B(l,s,o[s]);return l},v=(l,o)=>ne(l,re(o));import{e as H,S as ie,a_ as de,U as ue,G as me,u as pe,Q as J,h as he,i as fe,bf as ge,bg as we,r as $,O as A,P as h,J as be,b1 as ye,a as d,F as xe,j as T,aF as Se,D as De,b9 as K,b as ve}from"./index.dc867373.js";import{S as Q,c as N}from"./chroma.27172217.js";import"./emotion-react.browser.esm.e0d4ebea.js";const ke=()=>{var R,O,W;const l=H(ie),o=H(de),[s]=ue(),{getDetails:k}=me(),{GetCoins:z}=pe(),x=J(he),X=J(fe),{removeTransactions:Y,addTransaction:Z}=ge();let F=we();const[m,I]=$.exports.useState(),[U,ee]=$.exports.useState(!1),[c,M]=$.exports.useState();$.exports.useEffect(()=>{(async()=>{var e,t,i,S;if(s){const a=s.find(u=>u.hash.toLowerCase()===F.id);if(a){const u=a.id===A.batchRequest,te=a.id===A.swap,oe=a.id===A.automatedTransfer;let f,g,w,j=`${h((parseInt(a.rawData.gasUsed)*parseInt(a.rawData.gasPrice)).toString())} ${!u&&a.rawData.tokenSymbol==="cUSD"?"cUSD":"CELO"}`,V=be(new Date(parseInt(a.rawData.timeStamp)*1e3),"dd/mm/yyyy hh:MM:ss");if(u){const n=a;f=`${Array.from(new Set(n.payments.map(D=>D.to))).length} people`,g=`${n.payments.reduce((D,p)=>{var r,b;return parseFloat(h(p.amount))*((b=(r=o[p.coinAddress.name])==null?void 0:r.price)!=null?b:1)+D},0).toPrecision(4)} USD`,w=Array.from(new Set(n.payments.map(D=>D.to)))}else if(te){const n=a;f="Swap",g=`${h(n.amountIn)} ${n.coinIn.name} -> ${parseFloat(h(n.amountOutMin)).toPrecision(4)} ${n.coinOutMin.name}`,w=["Ubeswap"]}else if(oe){const n=a,D=await k(n.taskId),p=ye(D[1],n.rawData,x,z);if(p){if(p.id===A.batchRequest){const r=p;f=`${Array.from(new Set(r.payments.map(b=>b.to))).length} people`,g=`${r.payments.reduce((b,E)=>{var G,q;return parseFloat(h(E.amount))*((q=(G=o[E.coinAddress.name])==null?void 0:G.price)!=null?q:1)+b},0).toPrecision(4)} USD`,w=Array.from(new Set(r.payments.map(b=>b.to)))}else if(p.id===A.swap){const r=p;f="Swap",g=`${h(r.amountIn)} ${r.coinIn.name} -> ${parseFloat(h(r.amountOutMin)).toPrecision(4)} ${r.coinOutMin.name}`,w=["Ubeswap"]}else{const r=p;f="1 person",g=`${(parseFloat(h(r.amount))*((t=(e=o[r.coin.name])==null?void 0:e.price)!=null?t:1)).toPrecision(4)} USD`,w=r.to.toLowerCase()===l.toLowerCase()?[r.rawData.from]:[r.to]}I({date:V,fee:j,paidTo:f,totalAmount:g,walletAddress:w}),M(a)}return}else{const n=a;f="1 person",g=`${(parseFloat(h(n.amount))*((S=(i=o[n.coin.name])==null?void 0:i.price)!=null?S:1)).toPrecision(4)} USD`,w=n.to.toLowerCase()===l.toLowerCase()?[n.rawData.from]:[n.to]}I({date:V,fee:j,paidTo:f,totalAmount:g,walletAddress:w}),M(a)}else ee(!0)}})()},[s,F.id]);const L={control:e=>v(y({},e),{boxShadow:"none",height:"100%",border:"1px solid transparent","&:hover":{border:"1px solid transparent"},backgroundColor:X?"text-dark":"white"}),option:(e,{data:t,isDisabled:i,isFocused:S,isSelected:a})=>{const u=N(t.color);return v(y({},e),{outline:"none",border:"none",backgroundColor:i?void 0:a?t.color:S?u.alpha(.1).css():void 0,color:i?"#ccc":a?N.contrast(u,"white")>2?"white":"black":t.color,cursor:i?"not-allowed":"default",":active":v(y({},e[":active"]),{backgroundColor:i?void 0:a?t.color:u.alpha(.3).css()})})},multiValue:(e,{data:t})=>{const i=N(t.color);return v(y({},e),{backgroundColor:i.alpha(0).css()})},multiValueLabel:(e,{data:t})=>y(v(y({},e),{color:t.color}),ae(t.color)),multiValueRemove:(e,{data:t})=>v(y({},e),{color:t.color,":hover":{backgroundColor:t.color,color:"white"}})},ae=(e="transparent")=>({alignItems:"center",display:"flex",":before":{backgroundColor:e,borderRadius:10,content:'" "',display:"block",marginRight:8,height:10,width:10}}),P=async e=>{var S;const t=e.map(a=>({color:a.color,id:a.value,name:a.label,transactions:a.transactions,isDefault:a.isDefault})),i=(S=c==null?void 0:c.tags)==null?void 0:S.filter(a=>!t.find(u=>u.id===a.id));if(t&&t.length>0)for(const a of t)await Z(a.id,c.hash);if(i&&i.length>0)for(const a of i)await Y(a.id,c.hash.toLocaleLowerCase())};return d(xe,{children:d("div",{children:T("div",{className:"w-full shadow-custom px-5 py-14 rounded-xl flex flex-col items-center justify-center",children:[d("div",{className:"font-bold text-xl sm:text-2xl",children:"Transaction Details"}),c&&m&&!U?T("div",{className:"flex flex-col sm:grid sm:grid-cols-3 py-5 gap-14 w-full",children:[C("Transaction Hash",`${c.hash}`,`https://explorer.celo.org/tx/${c.hash}/token-transfers`),C("Paid To",m.paidTo),C("Total Amount",m.totalAmount),C("Transaction Fee",`${m.fee}`),C("Created Date & Time",m.date),C("Status",T("div",{className:"flex items-center gap-x-2",children:[d("div",{className:"bg-green-400 h-[0.625rem] w-[0.625rem] rounded-full"}),"Completed"]})),m.walletAddress.length===1?C("Wallet Address",`${Se(m.walletAddress[0])}`,void 0,()=>window.navigator.clipboard.writeText(m.walletAddress[0])):d(De,{displayName:"Wallet Address",className:"h-[4.688rem] bg-greylish bg-opacity-10",nameActivation:!0,selected:{name:"Choose to copy an address",coinUrl:K.None},onSelect:e=>{e.name&&window.navigator.clipboard.writeText(e.name)},list:[...m.walletAddress.map(e=>({name:e,coinUrl:K.None,disableAddressDisplay:!0}))]}),x&&x.length>0&&c.tags&&((R=c.tags)==null?void 0:R.length)>0&&d(Q,{className:"bg-greylish bg-opacity-10 rounded-xl",closeMenuOnSelect:!1,defaultValue:(O=c.tags)==null?void 0:O.map(e=>({value:e.id,label:e.name,color:e.color,transactions:e.transactions,isDefault:e.isDefault})),isMulti:!0,isClearable:!1,options:x.map(e=>({value:e.id,label:e.name,color:e.color,transactions:e.transactions,isDefault:e.isDefault})),styles:L,onChange:P}),x&&x.length>0&&c.tags&&((W=c.tags)==null?void 0:W.length)===0&&d(Q,{className:"bg-greylish bg-opacity-10 rounded-xl",closeMenuOnSelect:!1,isMulti:!0,isClearable:!1,options:x.map(e=>({value:e.id,label:e.name,color:e.color,transactions:e.transactions,isDefault:e.isDefault})),styles:L,onChange:P})]}):d(ve.ClipLoader,{}),U&&d("div",{children:"There is no such transaction belongs to your address"})]})})})},C=(l,o,s,k)=>T("div",{className:"bg-greylish bg-opacity-10 flex flex-col px-4 py-3 rounded-xl min-h-[4.688rem]",children:[d("div",{className:"text-sm text-greylish opacity-80",children:l}),d("div",{className:`font-bold text-lg truncate ${k&&"cursor-pointer"} ${s&&"cursor-pointer"}`,onClick:()=>{s?window.open(s,"_blank"):console.log("Wish you more money :)")},children:o})]});export{ke as default};
