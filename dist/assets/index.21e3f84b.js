var me=Object.defineProperty,pe=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var W=(s,t,r)=>t in s?me(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,V=(s,t)=>{for(var r in t||(t={}))H.call(t,r)&&W(s,r,t[r]);if(M)for(var r of M(t))_.call(t,r)&&W(s,r,t[r]);return s},Y=(s,t)=>pe(s,ue(t));var z=(s,t)=>{var r={};for(var n in s)H.call(s,n)&&t.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&M)for(var n of M(s))t.indexOf(n)<0&&_.call(s,n)&&(r[n]=s[n]);return r};var U=(s,t,r)=>(W(s,typeof t!="symbol"?t+"":t,r),r);import{r as b,j as i,a as e,X as he,F as k,aB as D,J as Q,b0 as R,aA as fe,Q as J,S as Z,G as xe,h as ee,u as te,O as g,b1 as ge,aF as ve,b2 as ye,P as j,aD as se,B as be,b3 as y,aI as re,aM as Ne,e as L,s as we,au as Ce,b4 as ke,c as Se,ae as De,C as Ae,b as K,b5 as Fe,b6 as $e}from"./index.dc867373.js";import{u as Re}from"./useMultisigProcess.fcf823a5.js";import{u as Te,W as je}from"./walletdropdown.ddfc83af.js";import{u as Oe}from"./useMultiWallet.40ef7dbb.js";const Ie={close:{height:0},open:{height:"auto"}},ne=({children:s,date:t,dataCount:r,status:n,direction:l,grid:o="grid-cols-[37%,33%,30%]",method:m,color:u})=>{const[c,d]=b.exports.useState(!1),f=()=>{d(!c)};return i("div",{children:[i("div",{className:`flex space-x-1 items-center ${u}  rounded-xl px-3 my-3 cursor-pointer`,onClick:f,children:[e("div",{children:e(he,{className:"transition",style:c?{transform:"rotate(180deg)"}:void 0})}),i("div",{className:`py-3 grid  px-2 ${o} items-center w-full`,children:[e("div",{children:r===1?"1 Payment":`${r} Payments`}),i("div",{className:"text-sm text-greylish",children:[m,l!==void 0&&t&&i(k,{children:[D.Swap===l?"Swapped":"",D.In===l?"Received":"",D.Borrow===l?"Borrowed":"",D.Withdraw===l?"Withdrawn":"",D.Repay===l?"Repaid":"",D.Deposit===l?"Deposited":"",D.AutomationOut===l?"Executed (A)":"",D.AutomationIn===l?"Received (A)":"",D.Out===l?"Executed":""," on ",Q(new Date(parseInt(t)*1e3),"mediumDate")]})]}),i("div",{className:`grid grid-cols-[10%,90%] ${o!=="grid-cols-[37%,33%,30%]"?"justify-start":"justify-end"} gap-x-2 items-center`,children:[n===R.Completed&&e("div",{className:"bg-green-400 w-2 h-2 rounded-full"}),n===R.Pending&&e("div",{className:"bg-primary w-2 h-2 rounded-full"}),n===R.Rejected&&e("div",{className:"bg-red-600 w-2 h-2 rounded-full"}),e("div",{children:n})]}),e("div",{})]})]}),e(fe.div,{className:"overflow-hidden",variants:Ie,initial:"close",animate:c?"open":"close",children:s})]})},Ue=({transaction:s,isMultiple:t})=>{var C;const[r,n]=b.exports.useState(!0),l=b.exports.useRef(null),o=J(Z),{getDetails:m}=xe(),u=J(ee),[c,d]=b.exports.useState(s),[f,T]=b.exports.useState(t),{GetCoins:A}=te(),x=c.id===g.swap,F=c.id===g.transferWithComment,N=c.id===g.automatedTransfer,P=[g.transfer,g.transferFrom,g.moolaBorrow,g.moolaDeposit,g.moolaWithdraw,g.moolaRepay].indexOf(c.id)>-1;let E=c.rawData.from.toLowerCase()===o.toLowerCase()?c.rawData.to:c.rawData.from,v,a,p,w;return F&&(w=c.comment),P&&!f&&(a=c),x&&!f&&(v=c),f&&(p=c,E=p.payments[0].to),b.exports.useEffect(()=>{l.current&&window.innerWidth/l.current.clientWidth>2&&n(!1),N&&(async()=>{const h=c,$=await m(h.taskId),S=ge($[1],c.rawData,u,A);S&&S.id===g.moolaRepay&&console.log(S);const B=V({rawData:h.rawData,hash:h.hash},S);S&&S.id===g.batchRequest&&T(!0),d(B)})()},[s]),i("div",{ref:l,className:`grid ${r?"grid-cols-[25%,45%,30%] sm:grid-cols-[36%,32.3%,10.7%,20%] pl-5":"grid-cols-[27%,48%,25%]"} min-h-[4.688rem] py-4 `,children:[i("div",{className:"flex space-x-3 overflow-hidden",children:[e("div",{className:`hidden sm:flex ${r?"items-center":"items-start"} ${!x&&!f&&"pt-3"} justify-center`,children:e("div",{className:`bg-greylish bg-opacity-10 ${r?"w-[2.813rem] h-[2.813rem] text-lg":"w-[1.563rem] h-[1.563rem] text-xs"} flex items-center justify-center rounded-full font-bold `,children:x?e("span",{children:"S"}):i("span",{children:[" ",F?w.slice(0,2):"Un"," "]})})}),i("div",{className:`sm:flex flex-col ${r?"justify-center":"justify-start"} items-start `,children:[e("div",{className:"text-greylish dark:text-white",children:x?e("span",{children:" Swap "}):i("span",{children:[" ",F?`${w}`:"Unknown"," "]})}),E&&!x&&e("div",{className:"text-sm text-greylish dark:text-white",children:ve(E)})]})]}),e("div",{className:"text-base",children:i("div",{children:[!x&&a&&!f&&i("div",{className:`flex ${r?"grid-cols-[20%,80%]":"grid-cols-[45%,55%]"} items-center mx-7 space-x-4`,children:[i("div",{className:`flex ${r?"grid-cols-[15%,85%]":"grid-cols-[25%,75%]"} gap-x-2 items-center`,children:[e("div",{className:"w-[0.625rem] h-[0.625rem] rounded-full bg-primary self-center"}),e("span",{children:ye(j(a.amount)).toFixed(2)})]}),e("div",{className:`flex ${r?"grid-cols-[10%,90%]":"grid-cols-[30%,70%]"} gap-x-2 items-center`,children:a.coin?i(k,{children:[e("div",{children:e("img",{src:a.coin.coinUrl,className:"rounded-full w-[1.125rem] h-[1.125rem]"})}),e("div",{children:(C=a.coin.name)!=null?C:"Unknown Coin"})]}):e("div",{children:"Unknown Coin"})})]}),!x&&p&&p.payments.map((h,$)=>i("div",{className:`flex ${r?"grid-cols-[20%,80%]":"grid-cols-[45%,55%]"} items-center mx-7 space-x-4`,children:[i("div",{className:`flex ${r?"grid-cols-[15%,85%]":"grid-cols-[25%,75%]"} gap-x-2 items-center`,children:[e("div",{className:"w-[0.625rem] h-[0.625rem] rounded-full bg-primary self-center"}),e("span",{children:parseFloat(j(h.amount)).toFixed(2)})]}),e("div",{className:`flex ${r?"grid-cols-[10%,90%]":"grid-cols-[30%,70%]"} gap-x-2 items-center`,children:h.coinAddress?i(k,{children:[e("div",{children:e("img",{src:h.coinAddress.coinUrl,className:"rounded-full w-[1.125rem] h-[1.125rem]"})}),e("div",{children:h.coinAddress.name})]}):e("div",{children:"Unknown Token"})})]},$)),x&&v&&i("div",{className:"flex flex-col",children:[i("div",{className:`flex ${r?"grid-cols-[20%,80%]":"grid-cols-[45%,55%]"} items-center mx-7 space-x-4`,children:[i("div",{className:`flex ${r?"grid-cols-[15%,85%]":"grid-cols-[25%,75%]"} gap-x-2 items-center`,children:[e("div",{className:"w-[0.625rem] h-[0.625rem] rounded-full bg-primary self-center"}),e("span",{children:parseFloat(j(v.amountIn)).toFixed(2)})]}),e("div",{className:`flex ${r?"grid-cols-[10%,90%]":"grid-cols-[30%,70%]"} gap-x-1 items-center`,children:v.coinIn?i(k,{children:[e("div",{children:e("img",{src:v.coinIn.coinUrl,className:"rounded-full w-[1.125rem] h-[1.125rem]"})}),e("div",{children:v.coinIn.name})]}):e("div",{children:"Unknown Coin"})})]}),e("div",{className:"mx-7",children:e("div",{className:"py-1 rounded-lg -translate-x-[4px]",children:e("img",{src:"/icons/arrowdown.svg",alt:"",className:"w-[1.125rem] h-[1.125rem] dark:invert dark:brightness-0"})})}),i("div",{className:`flex ${r?"grid-cols-[20%,80%]":"grid-cols-[45%,55%]"} items-center mx-7 space-x-4`,children:[i("div",{className:`grid ${r?"grid-cols-[15%,85%]":"grid-cols-[25%,75%]"} gap-x-2 items-center`,children:[e("div",{className:"w-[0.625rem] h-[0.625rem] rounded-full bg-primary self-center"}),e("span",{children:parseFloat(j(v.amountOutMin)).toFixed(2)})]}),e("div",{className:`flex ${r?"grid-cols-[10%,90%]":"grid-cols-[30%,70%]"} gap-x-1 items-center`,children:v.coinOutMin?i(k,{children:[e("div",{children:e("img",{src:v.coinOutMin.coinUrl,className:"rounded-full w-[1.125rem] h-[1.125rem]"})}),e("div",{children:v.coinOutMin.name})]}):e("div",{children:"Unknown Coin"})})]})]})]})}),r&&e("div",{className:"flex flex-col space-y-3",children:c.tags&&c.tags.map((h,$)=>i("div",{className:"flex space-x-3",children:[e("div",{className:"w-[1.125rem] h-[1.125rem] rounded-full",style:{backgroundColor:h.color}}),e("div",{children:h.name})]},h.id))}),e("div",{className:"flex justify-end cursor-pointer items-start md:pr-0 ",children:i(se,{to:`/dashboard/transactions/${c.rawData.hash}`,children:[" ",e(be,{version:"second",className:"px-6 py-2",children:"View Details"})]})})]})},Le=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ae=s=>Array.isArray(s)&&s.every(t=>typeof t=="object"&&!(t instanceof Array)),Ee=s=>Array.isArray(s)&&s.every(t=>Array.isArray(t)),Be=s=>Array.from(s.map(t=>Object.keys(t)).reduce((t,r)=>new Set([...t,...r]),[])),Me=(s,t)=>{t=t||Be(s);let r=t,n=t;ae(t)&&(r=t.map(o=>o.label),n=t.map(o=>o.key));const l=s.map(o=>n.map(m=>Pe(m,o)));return[r,...l]},Pe=(s,t)=>{const r=s.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(n,l,o,m){const u=n[l];if(u==null)m.splice(1);else return u},t);return r===void 0?s in t?t[s]:"":r},We=s=>typeof s=="undefined"||s===null?"":s,ie=(s,t=",",r='"')=>s.filter(n=>n).map(n=>n.map(l=>We(l)).map(l=>`${r}${l}${r}`).join(t)).join(`
`),Ve=(s,t,r,n)=>ie(t?[t,...s]:s,r,n),qe=(s,t,r,n)=>ie(Me(s,t),r,n),Ge=(s,t,r,n)=>t?`${t.join(r)}
${s}`:s.replace(/"/g,'""'),ce=(s,t,r,n)=>{if(ae(s))return qe(s,t,r,n);if(Ee(s))return Ve(s,t,r,n);if(typeof s=="string")return Ge(s,t,r);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},le=(s,t,r,n,l)=>{const o=ce(s,r,n,l),m=Le()?"application/csv":"text/csv",u=new Blob([t?"\uFEFF":"",o],{type:m}),c=`data:${m};charset=utf-8,${t?"\uFEFF":""}${o}`,d=window.URL||window.webkitURL;return typeof d.createObjectURL=="undefined"?c:d.createObjectURL(u)},oe={data:y.exports.oneOfType([y.exports.string,y.exports.array,y.exports.func]).isRequired,headers:y.exports.array,target:y.exports.string,separator:y.exports.string,filename:y.exports.string,uFEFF:y.exports.bool,onClick:y.exports.func,asyncOnClick:y.exports.bool,enclosingCharacter:y.exports.string},de={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},He={target:"_blank"};class X extends re.Component{constructor(t){super(t);this.state={}}buildURI(){return le(...arguments)}componentDidMount(){const{data:t,headers:r,separator:n,enclosingCharacter:l,uFEFF:o,target:m,specs:u,replace:c}=this.props;this.state.page=window.open(this.buildURI(t,o,r,n,l),m,u,c)}getWindow(){return this.state.page}render(){return null}}U(X,"defaultProps",Object.assign(de,He)),U(X,"propTypes",oe);class q extends re.Component{constructor(t){super(t);this.buildURI=this.buildURI.bind(this)}buildURI(){return le(...arguments)}handleLegacy(t,r=!1){if(window.navigator.msSaveOrOpenBlob){t.preventDefault();const{data:n,headers:l,separator:o,filename:m,enclosingCharacter:u,uFEFF:c}=this.props,d=r&&typeof n=="function"?n():n;let f=new Blob([c?"\uFEFF":"",ce(d,l,o,u)]);return window.navigator.msSaveBlob(f,m),!1}}handleAsyncClick(t){const r=n=>{if(n===!1){t.preventDefault();return}this.handleLegacy(t,!0)};this.props.onClick(t,r)}handleSyncClick(t){if(this.props.onClick(t)===!1){t.preventDefault();return}this.handleLegacy(t)}handleClick(){return t=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(t):this.handleSyncClick(t);this.handleLegacy(t)}}render(){const x=this.props,{data:t,headers:r,separator:n,filename:l,uFEFF:o,children:m,onClick:u,asyncOnClick:c,enclosingCharacter:d}=x,f=z(x,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),A=typeof window=="undefined"?"":this.buildURI(t,o,r,n,d);return e("a",Y(V({download:l},f),{ref:F=>this.link=F,target:"_self",href:A,onClick:this.handleClick(),children:m}))}}U(q,"defaultProps",de),U(q,"propTypes",oe);const _e=q;function Ye(s){return Ne({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(s)}const et=()=>{var v;const s=L(we),t=L(Z),r=L(Ce),n=L(ke),{refetch:l,isMultisig:o}=Re(),{pathname:m}=Se(),u=L(ee),{GetCoins:c}=te();let d;m.includes("/pending")?d="pending":m.includes("/rejected")?d="rejected":d="completed";const[f,T]=b.exports.useState(),{data:A}=Oe(),[x,F]=b.exports.useState((v=A==null?void 0:A.map(a=>a.address))!=null?v:[t]),{list:N}=Te(x);b.exports.useEffect(()=>{if(o){const a=setInterval(()=>{l(!0,0,(r==null?void 0:r.length)||20)},6e4);return()=>clearInterval(a)}},[t,r]),b.exports.useEffect(()=>{N&&setTimeout(()=>{P.then(a=>{T(a)})},500)},[N]);const P=b.exports.useMemo(()=>new Promise((a,p)=>{if(!N)return e(k,{});const w=N.map((C,h)=>ze(C,x,"grid-cols-[25%,45%,30%] sm:grid-cols-[28%,26.5%,25.5%,10%,10%]","bg-white dark:bg-darkSecond"));a(w)}),[N,u]);return e(k,{children:e("div",{children:i("div",{className:"flex flex-col space-y-5",children:[e("div",{className:"flex justify-between",children:e("div",{className:"text-2xl font-bold tracking-wider",children:"Transactions"})}),o&&e(k,{children:e("div",{className:"flex pl-5 pt-2 pb-2 w-full ",children:e(De,{data:[{to:"/dashboard/transactions/pending",text:"Pending Transactions"},{to:"/dashboard/transactions",text:"Completed Transactions"},{to:"/dashboard/transactions/rejected",text:"Rejected Transactions"}]})})}),e("div",{className:"pb-5",children:i("div",{className:"w-full pt-2 pb-3 rounded-xl",children:[i("div",{id:"header",className:"grid grid-cols-[25%,45%,30%] sm:grid-cols-[30%,25%,15%,15%,15%] border-b border-black pb-3 ",children:[e("div",{className:"sm:hidden text-xs font-medium pt-2",children:"Recipient/Sender"}),e("div",{className:"hidden sm:block text-xs sm:text-base font-medium pt-2",children:d!=="completed"?"Your Confirmation":"Recipient/Sender"}),e("div",{className:"text-xs sm:text-base font-medium pt-2",children:d!=="completed"?"Action":"Paid Amount"}),e("div",{className:"font-medium hidden md:block pt-2",children:d!=="completed"?"Signatures":"Details"}),!o&&e("div",{children:e(je,{selected:t,onChange:a=>{F([...a.map(p=>p.address)])}})}),!o&&i(k,{children:[" ",e("div",{className:"place-self-end ",children:N&&i(_e,{className:"font-normal px-2 sm:px-5 py-2 rounded-xl cursor-pointer bg-greylish bg-opacity-10 flex items-center justify-center xl:space-x-5",filename:"remox_transactions.csv",data:N.map(a=>{var C;let p=a.rawData,w=(C=Object.entries(Ae).find(h=>h[0]===p.tokenSymbol))==null?void 0:C[1];return{"Sent From:":p.from,"Amount:":parseFloat(j(p.value.toString())).toFixed(4)+` ${w&&c?c[w].name:"Unknown"}`,"To:":p.to,Date:Q(new Date(parseInt(p.timeStamp)*1e3),"mediumDate"),Gas:`${j((parseFloat(p.gasUsed)*parseFloat(p.gasPrice)).toString())} ${p.tokenSymbol==="cUSD"?"cUSD":"CELO"}`,"Block Number":p.blockNumber,"Transaction Hash":p.hash,"Block Hash":p.blockHash,Input:p.input}}),children:[e("div",{className:"hidden xl:block",children:"Export"}),e(Ye,{})]})})]})]}),o&&d!=="completed"&&e("div",{children:r?r.length>0?e(k,{children:r.filter(a=>a.method&&!a.executed&&(d!=="rejected"?a.confirmations.length>0:a.confirmations.length===0)).map((a,p)=>{var C,h,$,S,B;const w=a.method.split("").reduce((O,I,G)=>G===0?O+I.toUpperCase():I!==I.toLowerCase()&&G>0?O+" "+I:O+I,"");return e(ne,{grid:"grid-cols-[25%,45%,30%] sm:grid-cols-[28%,26.5%,45.5%]",dataCount:1,method:w,status:a.executed?R.Completed:a.confirmations.length>0?R.Pending:R.Rejected,children:i("div",{className:"pl-5 grid sm:grid-cols-[20%,30%,25%,25%,] lg:grid-cols-[28.5%,26%,25%,20.5%] min-h-[75px] py-6 items-center",children:[i("div",{children:[a.executed?e("div",{className:"text-white bg-green-500 border-2 border-green-500 rounded-xl px-3 py-1 text-center text-xs w-[125px]",children:"Submitted"}):null,a.executed?null:a.confirmations.includes(s.accountAddress)?e("div",{className:"text-white bg-primary border-2 border-primary rounded-xl px-3 py-1 text-center text-xs max-w-[175px]",children:"You've Confirmed"}):e("div",{className:"border-2 text-center border-primary  px-3 py-1 rounded-xl text-xs max-w-[175px]",children:"You've not confirmed yet"})]}),i("div",{className:"flex flex-col space-y-1",children:[a.owner?i("div",{className:"truncate pr-10  text-base",children:[(C=a.method)!=null&&C.toLowerCase().includes("transfer")?"To":"Owner",": ",a.owner]}):null,a.valueOfTransfer&&c?i("div",{className:"truncate pr-10  text-base",children:["Value: ",a.valueOfTransfer," ",(h=Object.values(c).find(O=>O.contractAddress.toLowerCase()===a.destination.toLowerCase()))==null?void 0:h.name]}):null,a.newOwner?i("div",{className:"truncate pr-10  text-base",children:["New Owner: ",a.newOwner]}):null,a.requiredCount?i("div",{className:"truncate pr-10  text-base",children:["New Signature Threshold: ",+a.requiredCount]}):null]}),i("div",{className:"font-semibold ",children:[a.confirmations.length," ",e("span",{className:"font-medium",children:"out of"})," ",($=a.method)!=null&&$.toLowerCase().includes("transfer")?n==null?void 0:n.sign:n==null?void 0:n.internalSign]}),e("div",{className:"flex justify-end cursor-pointer items-start md:pr-0 ",children:e(se,{to:`/dashboard/multisig/${a.id}`,children:e("div",{className:"text-primary px-6 max-h-[80px] w-full border-2 border-primary rounded-xl py-2 hover:bg-primary hover:text-white",children:"View Details"})})})]})},((B=(S=a.id)==null?void 0:S.toString())!=null?B:Math.random().toString())+a.data)})}):i("div",{className:"flex flex-col justify-center",children:[e("div",{className:"text-center py-3",children:e(K.ClipLoader,{})}),e("div",{className:"text-center text-xs text-gray-500",children:"It can take longer"})]}):e("div",{className:"text-center py-3",children:"No Transaction Yet"})}),d==="completed"&&(N&&f?f:e("div",{className:"text-center py-2",children:e(K.ClipLoader,{})}))]})})]})})})},ze=(s,t,r,n)=>{const l=s.id===g.batchRequest,o=[];if(l){const c=Fe(s.payments).groupBy("to").value();Object.entries(c).forEach(([d,f])=>{let T={method:s.method,id:s.id,hash:s.hash,rawData:s.rawData,payments:f};o.push(T)})}else o.push(s);const m=s.id===g.batchRequest?o.length:1;let u=$e(s,t);return e(b.exports.Fragment,{children:e(ne,{grid:r,color:n,direction:u,date:s.rawData.timeStamp,dataCount:m,status:R.Completed,children:e("div",{children:o.map((c,d)=>e(Ue,{transaction:c,isMultiple:c.id===g.batchRequest},`${s.hash}${d}`))})})},s.rawData.hash)};export{ze as ProcessAccordion,et as default};
