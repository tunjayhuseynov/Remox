import{e as C,S as T,j as r,a as e,aD as V,B as q,r as i,V as Z,U as B,aZ as z,a_ as G,g as J,C as K,O as S,a$ as _,F as Q,b as w}from"./index.dc867373.js";import{ProcessAccordion as X}from"./index.21e3f84b.js";import{a as Y,p as ee,b as te,A as se,c as ae,g as re,C as le}from"./chart.439d8145.js";import"./useMultisigProcess.fcf823a5.js";import"./useMultiWallet.40ef7dbb.js";import"./walletdropdown.ddfc83af.js";const ce=({transactions:d})=>{const y=C(T);return r("div",{className:"flex flex-col shadow-custom bg-white dark:bg-darkSecond max-h-full px-5 pt-5 pb-4 rounded-xl",children:[r("div",{className:"flex justify-between",children:[e("div",{className:"font-semibold text-lg tracking-wide",children:"Recent Transactions"}),e("div",{children:e(V,{to:"/dashboard/transactions",children:e(q,{version:"second",className:"px-10 !py-2",children:"View All"})})})]}),e("div",{className:"grid grid-cols-1 pt-5",children:d&&d.slice(0,7).map((m,v)=>X(m,[y],"grid-cols-[25%,50%,25%] lg:grid-cols-[]","bg-light dark:bg-dark"))})]})},ne=({title:d,coin:y,usd:m,percent:v,rate:k,img:A,setSelectcoin:g,selectcoin:p,onClick:b})=>r("div",{className:`py-2 pl-2 gap-2 pr-5 flex  cursor-pointer ${p===d&&"shadow-[1px_1px_8px_3px_#dad8d8] dark:shadow-[1px_1px_14px_2px_#0000008f] dark:bg-[#292929]"}  bg-white dark:bg-darkSecond rounded-xl h-[3.75rem]`,onClick:b,children:[e("div",{className:"w-[1.563rem] flex items-center justify-center",children:e("img",{width:"25",height:"25",src:A,alt:"",className:"rounded-xl"})}),r("div",{className:"flex-grow grid grid-cols-2 gap",children:[r("div",{className:"flex flex-col justify-between items-start",children:[e("div",{className:"font-semibold text-sm",children:d}),e("div",{className:"text-greylish text-sm font-normal",children:`${y}`})]}),e("div",{className:"flex flex-col justify-center items-end",children:r("div",{className:"font-semibold  text-base",children:["$",m]})})]})]});Y.register(ee,te,se,ae);const oe=()=>{const[d,y]=i.exports.useState({datasets:[{data:[0],backgroundColor:[""],borderWidth:0,hoverOffset:0}],labels:[""]}),m=i.exports.useRef(null),[v,k]=i.exports.useState(""),[A]=Z(v,k,""),g=C(T),[p]=B(),[b,R]=i.exports.useState(),[j,W]=i.exports.useState(),[c,U]=i.exports.useState();let L=C(z),n;L!==void 0&&(n=parseFloat(`${L}`).toFixed(2));const N=C(G),x=C(J),H=i.exports.useCallback((t,l,s)=>u=>{var a;const o=re(t.current,u);if(o.length>0&&o[0].index>0){const h=(a=o[0].index)!=null?a:1;s(l[h].name),t.current.setActiveElements([{datasetIndex:0,index:h}])}else t.current.setActiveElements([]),s("");t.current.update()},[]),F=i.exports.useMemo(()=>{if(N&&x&&x.CELO){const t=Object.values(N),l=Object.values(x);let s=0;return t.reduce((o,a,h)=>(l[h].amount>0&&(o+=a.percent_24,s++),o),0)/s}},[x,g]),O=t=>{m.current&&(t||t===0?m.current.setActiveElements([{datasetIndex:0,index:t}]):m.current.setActiveElements([]),m.current.update())};return i.exports.useEffect(()=>{v||O()},[v]),i.exports.useEffect(()=>{x&&U(Object.values(x).sort((t,l)=>(l.amount*l.tokenPrice).toLocaleString().localeCompare((t.amount*t.tokenPrice).toLocaleString())).slice(0,4))},[x,g]),i.exports.useEffect(()=>{if(p){let t=0,l=0;p.forEach(s=>{var o,a,h,$,D;if((o=Object.entries(K).find(f=>f[0]===s.rawData.tokenSymbol))==null||o[1],new Date(parseInt(s.rawData.timeStamp)*1e3).getMonth()===new Date().getMonth()){let f=0;if(s.id===S.transfer||s.id===S.transferFrom||s.id===S.transferWithComment){const E=s;f+=Number(_.fromWei(E.amount,"ether"))*Number((h=(a=N[E.rawData.tokenSymbol])==null?void 0:a.price)!=null?h:1)}s.id===S.noInput&&(f+=Number(_.fromWei(s.rawData.value,"ether"))*Number((D=($=N[s.rawData.tokenSymbol])==null?void 0:$.price)!=null?D:1)),s.id===S.batchRequest&&s.payments.forEach(I=>{var M,P;f+=Number(_.fromWei(I.amount,"ether"))*Number((P=(M=N[I.coinAddress.name])==null?void 0:M.price)!=null?P:1)}),s.rawData.from.toLowerCase()===g.toLowerCase()?l+=f:t+=f}}),R(t),W(l)}},[p,N,g]),i.exports.useEffect(()=>{var t,l;if(c!==void 0){const s=[],u=[],o=[];for(let a=0;a<c.length;a++)parseFloat((((t=c[a].tokenPrice)!=null?t:0)*c[a].amount).toFixed(2))!==0&&(s[a]=c[a].coins.name,o[a]=c[a].coins.color,u[a]=parseFloat((((l=c[a].tokenPrice)!=null?l:0)*c[a].amount).toFixed(2)));y({datasets:[{data:u.length>0?u:[100],backgroundColor:u.length>0?o:["#FF7348"],borderWidth:0,hoverOffset:15}],labels:u.length>0?s:["data"]})}},[c,g]),r(Q,{children:[r("div",{className:"col-span-2 flex flex-col",children:[r("div",{className:"flex justify-between pl-4 h-[1.875rem]",children:[e("div",{className:"text-base text-greylish",children:"Total Balance"}),e("div",{className:"text-base text-greylish opacity-70",children:"24h"})]}),r("div",{className:"flex justify-between shadow-custom bg-white dark:bg-darkSecond rounded-xl px-8 py-8",children:[e("div",{className:"text-4xl",children:n&&x||n!==void 0&&parseFloat(n)===0&&x?`$${n}`:e(w.ClipLoader,{})}),e("div",{className:"flex items-center text-3xl text-greylish opacity-70",style:n!==void 0&&parseFloat(n)!==0?F&&F>0?{color:"green"}:{color:"red"}:{color:"black"},children:n!==void 0&&parseFloat(n)!==0?F?`${F.toFixed(2)}%`:e(w.ClipLoader,{}):"0%"})]})]}),r("div",{children:[e("div",{className:"flex justify-between sm:pl-4",children:e("div",{className:"text-greylish text-sm sm:text-base",children:"Money in (c.m.)"})}),e("div",{className:"flex justify-between shadow-custom bg-white dark:bg-darkSecond rounded-xl px-8 py-4",children:e("div",{className:"text-xl sm:text-2xl opacity-80",children:b!==void 0&&p!==void 0&&n!==void 0?`+ $${b==null?void 0:b.toFixed(2)}`:e(w.ClipLoader,{})})})]}),r("div",{children:[e("div",{className:"flex justify-between sm:pl-4",children:e("div",{className:"text-greylish text-sm sm:text-base",children:"Money out (c.m.)"})}),e("div",{className:"flex justify-between shadow-custom bg-white dark:bg-darkSecond rounded-xl px-8 py-4",children:e("div",{className:"text-greylish opacity-80 text-xl sm:text-2xl",children:j!==void 0&&p!==void 0&&n!==void 0?`- $${j==null?void 0:j.toFixed(2)}`:e(w.ClipLoader,{})})})]}),r("div",{className:"sm:flex flex-col hidden relative",children:[e("div",{children:"Asset"}),e("div",{className:"h-full w-full",children:e(le,{data:d,ref:m,onClickEvent:H(m,c,k)})})]}),n&&c!==void 0?e("div",{className:"flex flex-col gap-9 overflow-hidden col-span-2 sm:col-span-1 px-4",ref:A,children:c.map((t,l)=>{var s;return console.log(t),e(ne,{setSelectcoin:k,onClick:()=>{t.amount&&(k(t.coins.name),O(l))},selectcoin:v,title:t.coins.name,coin:t.amount.toFixed(2),usd:(((s=t.tokenPrice)!=null?s:0)*t.amount).toFixed(2),percent:(t.percent||0).toFixed(1),rate:t.per_24,img:t.coins.coinUrl},t.coins.contractAddress+t.coins.name)})}):e(w.ClipLoader,{})]})},he=()=>{const[d]=B();return r("main",{className:"flex gap-5 flex-col xl:flex-row",children:[e("div",{className:"w-1/2",children:e("div",{className:"grid grid-cols-2 gap-8 max-h-full",children:e(oe,{})})}),e("div",{className:" w-1/2",children:e("div",{id:"transaction",className:" pt-[1.875rem]",children:d?e(ce,{transactions:d}):r("div",{className:"flex justify-center",children:[" ",e(w.ClipLoader,{})]})})})]})};export{he as default};
