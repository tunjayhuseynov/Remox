var M=Object.defineProperty,D=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var g=(e,r,c)=>r in e?M(e,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[r]=c,o=(e,r)=>{for(var c in r||(r={}))j.call(r,c)&&g(e,c,r[c]);if(v)for(var c of v(r))I.call(r,c)&&g(e,c,r[c]);return e},b=(e,r)=>D(e,T(r));import{u as k,j as t,F as h,a,E as p,q as x,l as U,G as F,d as B,e as w,s as G,B as N,v as u,H as S,I as q,p as E,J as W,r as f,o as L,M as $}from"./index.dc867373.js";const H=e=>{const{GetCoins:r}=k();return t(h,{children:[a("div",{className:"pl-4 items-start",children:a("div",{className:"flex space-x-3 items-center",children:t("div",{className:"hover:cursor-pointer flex items-center space-x-1",children:[a(p,{name:e.member.name}),a("div",{className:"text-base",children:e.member.name})]})})}),t("div",{className:"flex flex-col space-y-4",children:[t("div",{className:" pl-[2px] flex items-center justify-start gap-1",children:[a("div",{children:a("img",{src:r[e.member.currency].coinUrl,width:"15",height:"15",alt:"",className:"rounded-full"})}),a("div",{children:e.member.amount}),e.member.usdBase?t("div",{children:["USD as ",r[e.member.currency].name]}):a("div",{className:"text-base",children:r[e.member.currency].name})]}),e.member.secondaryCurrency&&t("div",{className:" pl-[2px] flex items-center justify-start gap-1",children:[a("div",{children:a("img",{src:r[e.member.secondaryCurrency].coinUrl,width:"15",height:"15",alt:"",className:"rounded-full"})}),a("div",{children:e.member.secondaryAmount}),e.member.usdBase?t("div",{children:["USD as ",r[e.member.secondaryCurrency].name]}):a("div",{children:r[e.member.secondaryCurrency].name})]})]}),t("div",{className:"pl-[2px] hidden sm:flex items-start text-base",children:[e.member.interval===x.monthly&&"Monthly",e.member.interval===x.weekly&&"Weekly"]})]})},J=({onDisable:e,memberState:r})=>{const c=U(),{cancelTask:s,loading:l}=F(),{removeMember:i,isLoading:y,editMember:C}=B(),m=w(G),A=async()=>{try{for(const d of r){await s(d.taskId);let n=o({},d);n.name=u(`${n.name}`,m==null?void 0:m.encryptedMessageToken),n.address=u(n.address,m==null?void 0:m.encryptedMessageToken),n.amount=u(n.amount,m==null?void 0:m.encryptedMessageToken),n.secondaryAmount&&(n.secondaryAmount=u(n.secondaryAmount,m==null?void 0:m.encryptedMessageToken)),await C(n.teamId,n.id,b(o({},n),{taskId:null,execution:S.auto}))}c(q({activate:!0,text:"Automations has been successfully stopped"}))}catch(d){console.error(d),c(E({activate:!0,text:"Failed to stop automations"}))}e(!1)};return a(h,{children:t("div",{className:"flex flex-col space-y-8 pt-10",children:[a("div",{className:"header",children:a("p",{className:"tracking-wider text-gray-500 text-lg",children:"The following automations will be stoped"})}),t("div",{id:"header",className:"hidden sm:grid grid-cols-[30%,30%,1fr] lg:grid-cols-[33%,33%,1fr] border-b border-black sm:pb-5 px-5",children:[a("div",{className:"font-normal",children:"Name"}),a("div",{className:"font-normal hidden lg:block",children:"Amount"}),a("div",{className:"font-normal",children:"Frequency"})]}),a("div",{children:r&&r.map(d=>a("div",{className:"grid grid-cols-2 sm:grid-cols-[30%,30%,1fr] lg:grid-cols-[33%,33%,1fr] py-6 border-b border-black pb-5 text-sm",children:a(H,{member:d,memberState:r})},d.id))}),t("div",{className:"flex justify-center gap-16",children:[a(N,{type:"submit",version:"second",onClick:()=>e(!1),className:"px-8",children:"Go back"}),a(N,{type:"submit",onClick:A,className:"px-8 py-3",isLoading:l||y,children:"Confirm"})]})]})})},K=e=>{const{GetCoins:r}=k();return t(h,{children:[a("div",{className:"pl-[2px] items-start",children:t("div",{className:"flex space-x-3 items-center",children:[a("input",{type:"checkbox",checked:e.memberState[0].some(c=>c.id===e.member.id),className:"relative cursor-pointer max-w-[1.25rem] max-h-[1.25rem] checked:before:absolute checked:before:w-full checked:before:h-full checked:before:bg-primary checked:before:block",onChange:c=>{const s=[...e.memberState[0]];c.target.checked?s.some(l=>l.id===e.member.id)||(s.push(e.member),e.memberState[1](s)):e.memberState[1](s.filter(l=>e.member.id!==l.id))}}),t("div",{className:"hover:cursor-pointer flex items-center space-x-1",children:[a(p,{name:e.member.name}),a("div",{children:e.member.name})]})]})}),t("div",{className:"flex flex-col space-y-4",children:[t("div",{className:" pl-[2px] flex items-center justify-start gap-1",children:[a("div",{children:a("img",{src:r[e.member.currency].coinUrl,width:"15",height:"15",alt:"",className:"rounded-full"})}),a("div",{children:e.member.amount}),e.member.usdBase?t("div",{children:["USD as ",r[e.member.currency].name]}):a("div",{children:r[e.member.currency].name})]}),e.member.secondaryCurrency&&t("div",{className:" pl-[2px] flex items-center justify-start gap-1",children:[a("div",{children:a("img",{src:r[e.member.secondaryCurrency].coinUrl,width:"15",height:"15",alt:"",className:"rounded-full"})}),a("div",{children:e.member.secondaryAmount}),e.member.usdBase?t("div",{children:["USD as ",r[e.member.secondaryCurrency].name]}):a("div",{children:r[e.member.secondaryCurrency].name})]})]}),t("div",{className:"pl-[2px] hidden sm:flex items-start text-base",children:[e.member.interval===x.monthly&&"Monthly",e.member.interval===x.weekly&&"Weekly"]}),a("div",{className:"flex space-x-8",children:e.member.paymantDate&&t(h,{children:[a("div",{className:"col-span-2 sm:col-span-1 pt-3 sm:pt-0 pl-[2px] truncate text-base",children:W(new Date(e.member.paymantDate),"dd mmmm yyyy")}),new Date().getTime()>new Date(e.member.paymantDate).getTime()]})})]})},P=e=>{const[r,c]=f.exports.useState(3),s=e.members.filter(l=>l.taskId);return t(h,{children:[a("div",{className:"col-span-4 flex space-x-3 py-2 pt-4 sm:pt-6 pb-1 px-5 items-center justify-start",children:a("div",{className:"font-semibold text-[1.5rem] overflow-hidden whitespace-nowrap",children:a("div",{children:e.name})})}),s.slice(0,r).map(l=>a("div",{className:"grid grid-cols-2 sm:grid-cols-[30%,30%,1fr] lg:grid-cols-[20%,20%,20%,1fr] py-6 border-b border-black pb-5 px-5 text-sm",children:a(K,{teamName:e.name,member:l,memberState:e.memberState})},l.id)),e.members&&e.members.length>3&&r!==100?a("button",{className:"py-3 pb-5 px-5 font-bold text-primary",onClick:()=>c(100),children:"Show More"}):null,e.members?void 0:a("div",{className:"b-5 px-5 border-b border-black pb-5",children:"No Team Member Yet"})]})},O=()=>{const e=w(L).contributors.map(l=>b(o({},l),{members:l.members.filter(i=>i.execution===S.auto&&i.taskId)})),[r,c]=f.exports.useState(!1),s=f.exports.useState([]);return t("div",{className:"flex flex-col space-y-3",children:[a("div",{className:"text-2xl font-bold pb-4",children:"Active Automations"}),a("div",{className:"px-10 pb-2 pt-2",children:a("div",{className:"flex flex-col space-y-3",children:t("div",{className:"flex justify-between py-2",children:[t("div",{className:"flex items-center",children:[a("span",{className:"bg-primary rounded-full w-[0.625rem] h-[0.625rem] "}),t("p",{className:"tracking-wider text-gray-500 text-lg ml-2",children:["Selected ",s[0].length," out of ",e.reduce((l,i)=>l+i.members.length,0)," automations"]})]}),s[0].length>0&&t("div",{className:"flex",children:[a("img",{src:"/icons/trashicon.svg",width:"0.938rem",height:"0.938rem",alt:""}),a("button",{className:"text-blue-500 tracking-wider hover text-lg ml-2",onClick:()=>c(!0),children:"Stop Automations"})]})]})})}),t("div",{className:"px-3 py-5 shadow-custom bg-white dark:bg-darkSecond",children:[t("div",{id:"header",className:"hidden sm:grid grid-cols-[30%,30%,1fr] lg:grid-cols-[3%,17%,20%,20%,40%,1fr] rounded-xl bg-light  dark:bg-dark  sm:mb-4 px-5",children:[a("input",{type:"checkbox",className:"self-center cursor-pointer w-[1.125rem] h-[1.125rem] checked:before:w-full checked:before:h-full checked:before:bg-primary checked:before:block",onChange:l=>{l.target.checked?s[1](e.reduce((i,y)=>i.concat(y.members),[])):s[1]([])}}),a("div",{className:"font-normal py-3",children:"Name"}),a("div",{className:"font-normal py-3 hidden lg:block",children:"Amount"}),a("div",{className:"font-normal py-3",children:"Frequency"}),a("div",{className:"font-normal py-3",children:"Next Payment"})]}),t("div",{className:"w-full  pt-4 pb-6 rounded-xl",children:[a("div",{children:e.map(l=>l&&l.members&&l.members.filter(i=>i.taskId).length>0?a(f.exports.Fragment,{children:a(P,b(o({},l),{memberState:s}))},l.id):void 0)}),e.length===0&&a("div",{className:"text-center text-gray-500 text-lg",children:"No automations found"})]})]}),r&&a($,{onDisable:c,className:"!min-w-[75vw]",children:a(J,{onDisable:c,memberState:s[0]})})]})};export{O as default};
