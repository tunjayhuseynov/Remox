import{dh as Si,cZ as Ai,di as rr,ao as w,dj as Oi,x as N,dk as Ti,da as Pi,dl as Ii,d8 as Ci,d9 as Ri,c$ as Ur,d6 as Ut,dm as mt}from"./index.dc867373.js";var Li={exports:{}},Hr={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});function Bi(e){var r=4,t=e.length,n=t%r;if(!n)return e;var i=t,a=r-n,c=t+a,d=Buffer.alloc(c);for(d.write(e);a--;)d.write("=",i++);return d.toString()}Fr.default=Bi;Object.defineProperty(Hr,"__esModule",{value:!0});var Ni=Fr;function Ht(e,r){return r===void 0&&(r="utf8"),Buffer.isBuffer(e)?Lr(e.toString("base64")):Lr(Buffer.from(e,r).toString("base64"))}function ji(e,r){return r===void 0&&(r="utf8"),Buffer.from(xr(e),"base64").toString(r)}function xr(e){return e=e.toString(),Ni.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Lr(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mi(e){return Buffer.from(xr(e),"base64")}var Se=Ht;Se.encode=Ht;Se.decode=ji;Se.toBase64=xr;Se.fromBase64=Lr;Se.toBuffer=Mi;Hr.default=Se;(function(e){e.exports=Hr.default,e.exports.default=e.exports})(Li);const Di=()=>Si(32).toString("hex");var Ft=De;De.default=De;De.stable=Kt;De.stableStringify=Kt;var Xe="[...]",xt="[Circular]",ye=[],ve=[];function kt(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function De(e,r,t,n){typeof n=="undefined"&&(n=kt()),Br(e,"",0,[],void 0,0,n);var i;try{ve.length===0?i=JSON.stringify(e,r,t):i=JSON.stringify(e,zt(r),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ye.length!==0;){var a=ye.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function be(e,r,t,n){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:e}),ye.push([n,t,r,i])):ve.push([r,t,e]):(n[t]=e,ye.push([n,t,r]))}function Br(e,r,t,n,i,a,c){a+=1;var d;if(typeof e=="object"&&e!==null){for(d=0;d<n.length;d++)if(n[d]===e){be(xt,e,r,i);return}if(typeof c.depthLimit!="undefined"&&a>c.depthLimit){be(Xe,e,r,i);return}if(typeof c.edgesLimit!="undefined"&&t+1>c.edgesLimit){be(Xe,e,r,i);return}if(n.push(e),Array.isArray(e))for(d=0;d<e.length;d++)Br(e[d],d,d,n,e,a,c);else{var l=Object.keys(e);for(d=0;d<l.length;d++){var h=l[d];Br(e[h],h,d,n,e,a,c)}}n.pop()}}function Ui(e,r){return e<r?-1:e>r?1:0}function Kt(e,r,t,n){typeof n=="undefined"&&(n=kt());var i=Nr(e,"",0,[],void 0,0,n)||e,a;try{ve.length===0?a=JSON.stringify(i,r,t):a=JSON.stringify(i,zt(r),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ye.length!==0;){var c=ye.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return a}function Nr(e,r,t,n,i,a,c){a+=1;var d;if(typeof e=="object"&&e!==null){for(d=0;d<n.length;d++)if(n[d]===e){be(xt,e,r,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof c.depthLimit!="undefined"&&a>c.depthLimit){be(Xe,e,r,i);return}if(typeof c.edgesLimit!="undefined"&&t+1>c.edgesLimit){be(Xe,e,r,i);return}if(n.push(e),Array.isArray(e))for(d=0;d<e.length;d++)Nr(e[d],d,d,n,e,a,c);else{var l={},h=Object.keys(e).sort(Ui);for(d=0;d<h.length;d++){var _=h[d];Nr(e[_],_,d,n,e,a,c),l[_]=e[_]}if(typeof i!="undefined")ye.push([i,r,e]),i[r]=l;else return l}n.pop()}}function zt(e){return e=typeof e!="undefined"?e:function(r,t){return t},function(r,t){if(ve.length>0)for(var n=0;n<ve.length;n++){var i=ve[n];if(i[1]===r&&i[0]===t){t=i[2],ve.splice(n,1);break}}return e.call(this,r,t)}}var He={exports:{}},Hi=qt;function qt(e,r){if(e&&r)return qt(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var a=e.apply(this,n),c=n[n.length-1];return typeof a=="function"&&a!==c&&Object.keys(c).forEach(function(d){a[d]=c[d]}),a}}var Wt=Hi;He.exports=Wt(Ye);He.exports.strict=Wt(Gt);Ye.proto=Ye(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ye(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Gt(this)},configurable:!0})});function Ye(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function Gt(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}var Fi=He.exports,xi=He.exports,ki=function(){},Ki=function(e){return e.setHeader&&typeof e.abort=="function"},zi=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Vt=function(e,r,t){if(typeof r=="function")return Vt(e,null,r);r||(r={}),t=xi(t||ki);var n=e._writableState,i=e._readableState,a=r.readable||r.readable!==!1&&e.readable,c=r.writable||r.writable!==!1&&e.writable,d=!1,l=function(){e.writable||h()},h=function(){c=!1,a||t.call(e)},_=function(){a=!1,c||t.call(e)},b=function(A){t.call(e,A?new Error("exited with error code: "+A):null)},p=function(A){t.call(e,A)},T=function(){process.nextTick(x)},x=function(){if(!d){if(a&&!(i&&i.ended&&!i.destroyed))return t.call(e,new Error("premature close"));if(c&&!(n&&n.ended&&!n.destroyed))return t.call(e,new Error("premature close"))}},E=function(){e.req.on("finish",h)};return Ki(e)?(e.on("complete",h),e.on("abort",T),e.req?E():e.on("request",E)):c&&!n&&(e.on("end",l),e.on("close",l)),zi(e)&&e.on("exit",b),e.on("end",_),e.on("finish",h),r.error!==!1&&e.on("error",p),e.on("close",T),function(){d=!0,e.removeListener("complete",h),e.removeListener("abort",T),e.removeListener("request",E),e.req&&e.req.removeListener("finish",h),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",h),e.removeListener("exit",b),e.removeListener("end",_),e.removeListener("error",p),e.removeListener("close",T)}},jr=Vt,qi=He.exports,Wi=jr,Tr=Ai,Ue=function(){},Gi=/^v?\.0/.test(process.version),tr=function(e){return typeof e=="function"},Vi=function(e){return!Gi||!Tr?!1:(e instanceof(Tr.ReadStream||Ue)||e instanceof(Tr.WriteStream||Ue))&&tr(e.close)},$i=function(e){return e.setHeader&&tr(e.abort)},Ji=function(e,r,t,n){n=qi(n);var i=!1;e.on("close",function(){i=!0}),Wi(e,{readable:r,writable:t},function(c){if(c)return n(c);i=!0,n()});var a=!1;return function(c){if(!i&&!a){if(a=!0,Vi(e))return e.close(Ue);if($i(e))return e.abort();if(tr(e.destroy))return e.destroy();n(c||new Error("stream was destroyed"))}}},vt=function(e){e()},Zi=function(e,r){return e.pipe(r)},Yi=function(){var e=Array.prototype.slice.call(arguments),r=tr(e[e.length-1]||Ue)&&e.pop()||Ue;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var t,n=e.map(function(i,a){var c=a<e.length-1,d=a>0;return Ji(i,c,d,function(l){t||(t=l),l&&n.forEach(vt),!c&&(n.forEach(vt),r(t))})});return e.reduce(Zi)},yt=Yi;function Ve(){}const _t="SYN",Pr="ACK",wt="BRK";class bt extends rr.exports.Duplex{constructor(r){let{name:t,target:n,targetWindow:i=window,targetOrigin:a="*"}=r;super({objectMode:!0});if(w(this,"_init",void 0),w(this,"_haveSyn",void 0),w(this,"_name",void 0),w(this,"_target",void 0),w(this,"_targetWindow",void 0),w(this,"_targetOrigin",void 0),w(this,"_onMessage",void 0),w(this,"_synIntervalId",void 0),!t||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=n,this._targetWindow=i,this._targetOrigin=a,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(wt,null,Ve),this._haveSyn=!1,this._init=!1}_handShake(){this._write(_t,null,Ve),this.cork()}_onData(r){if(!this._init)r===_t?(this._haveSyn=!0,this._write(Pr,null,Ve)):r===Pr&&(this._init=!0,this._haveSyn||this._write(Pr,null,Ve),this.uncork());else if(r===wt)this._break();else try{this.push(r)}catch(t){this.emit("error",t)}}_postMessage(r){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:r},t)}onMessage(r){const t=r.data;this._targetOrigin!=="*"&&r.origin!==this._targetOrigin||r.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(r,t,n){this._postMessage(r),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}function Et(e,r,t){try{Reflect.apply(e,r,t)}catch(n){setTimeout(()=>{throw n})}}function Xi(e){const r=e.length,t=new Array(r);for(let n=0;n<r;n+=1)t[n]=e[n];return t}class nr extends Oi.exports.EventEmitter{emit(r){let t=r==="error";const n=this._events;if(n!==void 0)t=t&&n.error===void 0;else if(!t)return!1;for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];if(t){let l;if(a.length>0&&([l]=a),l instanceof Error)throw l;const h=new Error("Unhandled error.".concat(l?" (".concat(l.message,")"):""));throw h.context=l,h}const d=n[r];if(d===void 0)return!1;if(typeof d=="function")Et(d,this,a);else{const l=d.length,h=Xi(d);for(let _=0;_<l;_+=1)Et(h[_],this,a)}return!0}}class Ce extends Error{constructor(r){let{code:t,message:n,data:i}=r;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n);w(this,"code",void 0),w(this,"data",void 0),this.code=t,i!==void 0&&(this.data=i)}toString(){return Ft({code:this.code,message:this.message,data:this.data,stack:this.stack})}}function St(e){return e.toString()}const Mr=function(e,r){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,i)=>{n||i.error?r(n||i.error):!t||Array.isArray(i)?e(i):e(i.result)}};function Qi(){const e={};function r(){return!1}const t=new nr;function n(l){const h=e[l.id];if(!h)throw new Error('StreamMiddleware - Unknown response id "'.concat(l.id,'"'));delete e[l.id],Object.assign(h.res,l),setTimeout(h.end)}function i(l){t.emit("notification",l)}function a(l,h,_){let b;try{!l.id?i(l):n(l)}catch(p){b=p}_(b)}const c=new rr.exports.Duplex({objectMode:!0,read:r,write:a});return{events:t,middleware:(l,h,_,b)=>{c.push(l),e[l.id]={req:l,res:h,next:_,end:b}},stream:c}}function eo(){return(e,r,t,n)=>{const i=e.id,a=Di();e.id=a,r.id=a,t(c=>{e.id=i,r.id=i,c()})}}function At(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function ro(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?At(Object(t),!0).forEach(function(n){w(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):At(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}class oe extends nr{constructor(){super();w(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(r,t,n){const i=[];let a=null,c=!1;for(const d of n)if([a,c]=await oe._runMiddleware(r,t,d,i),c)break;return[a,c,i.reverse()]}static _runMiddleware(r,t,n,i){return new Promise(a=>{const c=l=>{const h=l||t.error;h&&(t.error=St(h)),a([h,!0])},d=l=>{t.error?c(t.error):(l&&(typeof l!="function"&&c(new Ce({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(l)),a([null,!1]))};try{n(r,t,d,c)}catch(l){c(l)}})}static async _runReturnHandlers(r){for(const t of r)await new Promise((n,i)=>{t(a=>a?i(a):n())})}static _checkForCompletion(r,t,n){if(!("result"in t)&&!("error"in t))throw new Ce({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Ce({code:-32603,message:"Nothing ended request"})}push(r){this._middleware.push(r)}handle(r,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(r)?t?this._handleBatch(r,t):this._handleBatch(r):t?this._handle(r,t):this._promiseHandle(r)}asMiddleware(){return async(r,t,n,i)=>{try{const[a,c,d]=await oe._runAllMiddleware(r,t,this._middleware);return c?(await oe._runReturnHandlers(d),i(a)):n(async l=>{try{await oe._runReturnHandlers(d)}catch(h){return l(h)}return l()})}catch(a){return i(a)}}}async _handleBatch(r,t){try{const n=await Promise.all(r.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(r){return new Promise(t=>{this._handle(r,(n,i)=>{t(i)})})}async _handle(r,t){if(!r||Array.isArray(r)||typeof r!="object"){const c=new Ce({code:-32603,message:"request must be plain object"});return t(c,{id:void 0,jsonrpc:"2.0",error:c})}if(typeof r.method!="string"){const c=new Ce({code:-32603,message:"method must be string"});return t(c,{id:r.id,jsonrpc:"2.0",error:c})}const n=ro({},r),i={id:n.id,jsonrpc:n.jsonrpc};let a=null;try{await this._processRequest(n,i)}catch(c){a=c}return a&&(delete i.result,i.error||(i.error=St(a))),t(a,i)}async _processRequest(r,t){const[n,i,a]=await oe._runAllMiddleware(r,t,this._middleware);if(oe._checkForCompletion(r,t,i),await oe._runReturnHandlers(a),n)throw n}}class to extends rr.exports.Duplex{constructor(r){let{parent:t,name:n}=r;super({objectMode:!0});w(this,"_parent",void 0),w(this,"_name",void 0),this._parent=t,this._name=n}_read(){}_write(r,t,n){this._parent.push({name:this._name,data:r}),n()}}function Ot(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function Tt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ot(Object(t),!0).forEach(function(n){w(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ot(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}const Pt=Symbol("IGNORE_SUBSTREAM");class no extends rr.exports.Duplex{constructor(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(Tt(Tt({},r),{},{objectMode:!0}));w(this,"_substreams",void 0),w(this,"getStream",void 0),this._substreams={}}createStream(r){if(!r)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[r])throw new Error('ObjectMultiplex - Substream for name "'.concat(r,'" already exists'));const t=new to({parent:this,name:r});return this._substreams[r]=t,io(this,n=>t.destroy(n||void 0)),t}ignoreStream(r){if(!r)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[r])throw new Error('ObjectMultiplex - Substream for name "'.concat(r,'" already exists'));this._substreams[r]=Pt}_read(){}_write(r,t,n){const{name:i,data:a}=r;if(!i)return window.console.warn('ObjectMultiplex - malformed chunk without name "'.concat(r,'"')),n();const c=this._substreams[i];return c?(c!==Pt&&c.push(a),n()):(window.console.warn('ObjectMultiplex - orphaned data for stream "'.concat(i,'"')),n())}}function io(e,r){const t=Fi(r);jr(e,{readable:!1},t),jr(e,{writable:!1},t)}var oo=ao;function ao(e){e=e||{};var r=e.max||Number.MAX_SAFE_INTEGER,t=typeof e.start!="undefined"?e.start:Math.floor(Math.random()*r);return function(){return t=t%r,t++}}var so={},kr={},V={},uo=N&&N.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),co=N&&N.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),fo=N&&N.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&uo(r,e,t);return co(r,e),r},lo=N&&N.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(V,"__esModule",{value:!0});V.rlp=V.BN=void 0;var ho=lo(Ti.exports);V.BN=ho.default;var go=fo(Pi);V.rlp=go;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.MAX_INTEGER=e.MAX_UINT64=void 0;var r=Ii,t=V;e.MAX_UINT64=new t.BN("ffffffffffffffff",16),e.MAX_INTEGER=new t.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),e.TWO_POW256=new t.BN("10000000000000000000000000000000000000000000000000000000000000000",16),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=r.Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=r.Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=r.Buffer.from(e.KECCAK256_RLP_S,"hex")})(kr);var Kr={},M={};Object.defineProperty(M,"__esModule",{value:!0});M.isHexString=M.getKeys=M.fromAscii=M.fromUtf8=M.toAscii=M.arrayContainsArray=M.getBinarySize=M.padToEven=M.stripHexPrefix=M.isHexPrefixed=void 0;function $t(e){if(typeof e!="string")throw new Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return e[0]==="0"&&e[1]==="x"}M.isHexPrefixed=$t;var po=function(e){if(typeof e!="string")throw new Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return $t(e)?e.slice(2):e};M.stripHexPrefix=po;function Jt(e){var r=e;if(typeof r!="string")throw new Error("[padToEven] value must be type 'string', received ".concat(typeof r));return r.length%2&&(r="0".concat(r)),r}M.padToEven=Jt;function mo(e){if(typeof e!="string")throw new Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof e));return Buffer.byteLength(e,"utf8")}M.getBinarySize=mo;function vo(e,r,t){if(Array.isArray(e)!==!0)throw new Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(Array.isArray(r)!==!0)throw new Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof r,"'"));return r[t?"some":"every"](function(n){return e.indexOf(n)>=0})}M.arrayContainsArray=vo;function yo(e){var r="",t=0,n=e.length;for(e.substring(0,2)==="0x"&&(t=2);t<n;t+=2){var i=parseInt(e.substr(t,2),16);r+=String.fromCharCode(i)}return r}M.toAscii=yo;function _o(e){var r=Buffer.from(e,"utf8");return"0x".concat(Jt(r.toString("hex")).replace(/^0+|0+$/g,""))}M.fromUtf8=_o;function wo(e){for(var r="",t=0;t<e.length;t++){var n=e.charCodeAt(t),i=n.toString(16);r+=i.length<2?"0".concat(i):i}return"0x".concat(r)}M.fromAscii=wo;function bo(e,r,t){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if(typeof r!="string")throw new Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));for(var n=[],i=0;i<e.length;i++){var a=e[i][r];if(t&&!a)a="";else if(typeof a!="string")throw new Error("invalid abi - expected type 'string', received ".concat(typeof a));n.push(a)}return n}M.getKeys=bo;function Eo(e,r){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||r&&e.length!==2+2*r)}M.isHexString=Eo;var de={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.assertIsString=Z.assertIsArray=Z.assertIsBuffer=Z.assertIsHexString=void 0;var So=M,Ao=function(e){if(!(0,So.isHexString)(e)){var r="This method only supports 0x-prefixed hex strings but input was: ".concat(e);throw new Error(r)}};Z.assertIsHexString=Ao;var Oo=function(e){if(!Buffer.isBuffer(e)){var r="This method only supports Buffer but input was: ".concat(e);throw new Error(r)}};Z.assertIsBuffer=Oo;var To=function(e){if(!Array.isArray(e)){var r="This method only supports number arrays but input was: ".concat(e);throw new Error(r)}};Z.assertIsArray=To;var Po=function(e){if(typeof e!="string"){var r="This method only supports strings but input was: ".concat(e);throw new Error(r)}};Z.assertIsString=Po;(function(e){var r=N&&N.__values||function(u){var m=typeof Symbol=="function"&&Symbol.iterator,P=m&&u[m],R=0;if(P)return P.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&R>=u.length&&(u=void 0),{value:u&&u[R++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},t=N&&N.__read||function(u,m){var P=typeof Symbol=="function"&&u[Symbol.iterator];if(!P)return u;var R=P.call(u),k,z=[],G;try{for(;(m===void 0||m-- >0)&&!(k=R.next()).done;)z.push(k.value)}catch(se){G={error:se}}finally{try{k&&!k.done&&(P=R.return)&&P.call(R)}finally{if(G)throw G.error}}return z};Object.defineProperty(e,"__esModule",{value:!0}),e.bufArrToArr=e.arrToBufArr=e.validateNoLeadingZeroes=e.baToJSON=e.toUtf8=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToHex=e.bufferToInt=e.toBuffer=e.unpadHexString=e.unpadArray=e.unpadBuffer=e.setLengthRight=e.setLengthLeft=e.zeros=e.intToBuffer=e.intToHex=void 0;var n=V,i=M,a=Z,c=function(u){if(!Number.isSafeInteger(u)||u<0)throw new Error("Received an invalid integer type: ".concat(u));return"0x".concat(u.toString(16))};e.intToHex=c;var d=function(u){var m=(0,e.intToHex)(u);return Buffer.from((0,i.padToEven)(m.slice(2)),"hex")};e.intToBuffer=d;var l=function(u){return Buffer.allocUnsafe(u).fill(0)};e.zeros=l;var h=function(u,m,P){var R=(0,e.zeros)(m);return P?u.length<m?(u.copy(R),R):u.slice(0,m):u.length<m?(u.copy(R,m-u.length),R):u.slice(-m)},_=function(u,m){return(0,a.assertIsBuffer)(u),h(u,m,!1)};e.setLengthLeft=_;var b=function(u,m){return(0,a.assertIsBuffer)(u),h(u,m,!0)};e.setLengthRight=b;var p=function(u){for(var m=u[0];u.length>0&&m.toString()==="0";)u=u.slice(1),m=u[0];return u},T=function(u){return(0,a.assertIsBuffer)(u),p(u)};e.unpadBuffer=T;var x=function(u){return(0,a.assertIsArray)(u),p(u)};e.unpadArray=x;var E=function(u){return(0,a.assertIsHexString)(u),u=(0,i.stripHexPrefix)(u),p(u)};e.unpadHexString=E;var A=function(u){if(u==null)return Buffer.allocUnsafe(0);if(Buffer.isBuffer(u)||Array.isArray(u)||u instanceof Uint8Array)return Buffer.from(u);if(typeof u=="string"){if(!(0,i.isHexString)(u))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(u));return Buffer.from((0,i.padToEven)((0,i.stripHexPrefix)(u)),"hex")}if(typeof u=="number")return(0,e.intToBuffer)(u);if(n.BN.isBN(u)){if(u.isNeg())throw new Error("Cannot convert negative BN to buffer. Given: ".concat(u));return u.toArrayLike(Buffer)}if(u.toArray)return Buffer.from(u.toArray());if(u.toBuffer)return Buffer.from(u.toBuffer());throw new Error("invalid type")};e.toBuffer=A;var S=function(u){return new n.BN((0,e.toBuffer)(u)).toNumber()};e.bufferToInt=S;var O=function(u){return u=(0,e.toBuffer)(u),"0x"+u.toString("hex")};e.bufferToHex=O;var K=function(u){return new n.BN(u).fromTwos(256)};e.fromSigned=K;var y=function(u){return Buffer.from(u.toTwos(256).toArray())};e.toUnsigned=y;var B=function(u){return typeof u!="string"||(0,i.isHexPrefixed)(u)?u:"0x"+u};e.addHexPrefix=B;var $=function(u){var m=/^(00)+|(00)+$/g;if(u=(0,i.stripHexPrefix)(u),u.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");var P=Buffer.from(u.replace(m,""),"hex");return P.toString("utf8")};e.toUtf8=$;var le=function(u){if(Buffer.isBuffer(u))return"0x".concat(u.toString("hex"));if(u instanceof Array){for(var m=[],P=0;P<u.length;P++)m.push((0,e.baToJSON)(u[P]));return m}};e.baToJSON=le;var te=function(u){var m,P;try{for(var R=r(Object.entries(u)),k=R.next();!k.done;k=R.next()){var z=t(k.value,2),G=z[0],se=z[1];if(se!==void 0&&se.length>0&&se[0]===0)throw new Error("".concat(G," cannot have leading zeroes, received: ").concat(se.toString("hex")))}}catch(hr){m={error:hr}}finally{try{k&&!k.done&&(P=R.return)&&P.call(R)}finally{if(m)throw m.error}}};e.validateNoLeadingZeroes=te;function I(u){return Array.isArray(u)?u.map(function(m){return I(m)}):Buffer.from(u)}e.arrToBufArr=I;function g(u){return Array.isArray(u)?u.map(function(m){return g(m)}):Uint8Array.from(u!=null?u:[])}e.bufArrToArr=g})(de);var ir={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rlphash=e.ripemd160FromArray=e.ripemd160FromString=e.ripemd160=e.sha256FromArray=e.sha256FromString=e.sha256=e.keccakFromArray=e.keccakFromHexString=e.keccakFromString=e.keccak256=e.keccak=void 0;var r=Ci,t=Ri,n=V,i=de,a=Z,c=function(y,B){switch(B===void 0&&(B=256),(0,a.assertIsBuffer)(y),B){case 224:return(0,r.keccak224)(y);case 256:return(0,r.keccak256)(y);case 384:return(0,r.keccak384)(y);case 512:return(0,r.keccak512)(y);default:throw new Error("Invald algorithm: keccak".concat(B))}};e.keccak=c;var d=function(y){return(0,e.keccak)(y)};e.keccak256=d;var l=function(y,B){B===void 0&&(B=256),(0,a.assertIsString)(y);var $=Buffer.from(y,"utf8");return(0,e.keccak)($,B)};e.keccakFromString=l;var h=function(y,B){return B===void 0&&(B=256),(0,a.assertIsHexString)(y),(0,e.keccak)((0,i.toBuffer)(y),B)};e.keccakFromHexString=h;var _=function(y,B){return B===void 0&&(B=256),(0,a.assertIsArray)(y),(0,e.keccak)((0,i.toBuffer)(y),B)};e.keccakFromArray=_;var b=function(y){return y=(0,i.toBuffer)(y),t("sha256").update(y).digest()},p=function(y){return(0,a.assertIsBuffer)(y),b(y)};e.sha256=p;var T=function(y){return(0,a.assertIsString)(y),b(y)};e.sha256FromString=T;var x=function(y){return(0,a.assertIsArray)(y),b(y)};e.sha256FromArray=x;var E=function(y,B){y=(0,i.toBuffer)(y);var $=t("rmd160").update(y).digest();return B===!0?(0,i.setLengthLeft)($,32):$},A=function(y,B){return(0,a.assertIsBuffer)(y),E(y,B)};e.ripemd160=A;var S=function(y,B){return(0,a.assertIsString)(y),E(y,B)};e.ripemd160FromString=S;var O=function(y,B){return(0,a.assertIsArray)(y),E(y,B)};e.ripemd160FromArray=O;var K=function(y){return(0,e.keccak)(n.rlp.encode(y))};e.rlphash=K})(ir);var or={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toType=e.TypeOutput=e.bnToRlp=e.bnToUnpaddedBuffer=e.bnToHex=void 0;var r=V,t=M,n=de;function i(h){return"0x".concat(h.toString(16))}e.bnToHex=i;function a(h){return(0,n.unpadBuffer)(h.toArrayLike(Buffer))}e.bnToUnpaddedBuffer=a;function c(h){return a(h)}e.bnToRlp=c;var d;(function(h){h[h.Number=0]="Number",h[h.BN=1]="BN",h[h.Buffer=2]="Buffer",h[h.PrefixedHexString=3]="PrefixedHexString"})(d=e.TypeOutput||(e.TypeOutput={}));function l(h,_){if(h===null)return null;if(h!==void 0){if(typeof h=="string"&&!(0,t.isHexString)(h))throw new Error("A string must be provided with a 0x-prefix, given: ".concat(h));if(typeof h=="number"&&!Number.isSafeInteger(h))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");var b=(0,n.toBuffer)(h);if(_===d.Buffer)return b;if(_===d.BN)return new r.BN(b);if(_===d.Number){var p=new r.BN(b),T=new r.BN(Number.MAX_SAFE_INTEGER.toString());if(p.gt(T))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return p.toNumber()}else return"0x".concat(b.toString("hex"))}}e.toType=l})(or);(function(e){var r=N&&N.__read||function(g,u){var m=typeof Symbol=="function"&&g[Symbol.iterator];if(!m)return g;var P=m.call(g),R,k=[],z;try{for(;(u===void 0||u-- >0)&&!(R=P.next()).done;)k.push(R.value)}catch(G){z={error:G}}finally{try{R&&!R.done&&(m=P.return)&&m.call(P)}finally{if(z)throw z.error}}return k},t=N&&N.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.isZeroAddress=e.zeroAddress=e.importPublic=e.privateToAddress=e.privateToPublic=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isValidAddress=e.Account=void 0;var n=t(Ur.exports),i=V,a=Ut,c=M,d=kr,l=de,h=ir,_=Z,b=or,p=function(){function g(u,m,P,R){u===void 0&&(u=new i.BN(0)),m===void 0&&(m=new i.BN(0)),P===void 0&&(P=d.KECCAK256_RLP),R===void 0&&(R=d.KECCAK256_NULL),this.nonce=u,this.balance=m,this.stateRoot=P,this.codeHash=R,this._validate()}return g.fromAccountData=function(u){var m=u.nonce,P=u.balance,R=u.stateRoot,k=u.codeHash;return new g(m?new i.BN((0,l.toBuffer)(m)):void 0,P?new i.BN((0,l.toBuffer)(P)):void 0,R?(0,l.toBuffer)(R):void 0,k?(0,l.toBuffer)(k):void 0)},g.fromRlpSerializedAccount=function(u){var m=i.rlp.decode(u);if(!Array.isArray(m))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(m)},g.fromValuesArray=function(u){var m=r(u,4),P=m[0],R=m[1],k=m[2],z=m[3];return new g(new i.BN(P),new i.BN(R),k,z)},g.prototype._validate=function(){if(this.nonce.lt(new i.BN(0)))throw new Error("nonce must be greater than zero");if(this.balance.lt(new i.BN(0)))throw new Error("balance must be greater than zero");if(this.stateRoot.length!==32)throw new Error("stateRoot must have a length of 32");if(this.codeHash.length!==32)throw new Error("codeHash must have a length of 32")},g.prototype.raw=function(){return[(0,b.bnToUnpaddedBuffer)(this.nonce),(0,b.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash]},g.prototype.serialize=function(){return i.rlp.encode(this.raw())},g.prototype.isContract=function(){return!this.codeHash.equals(d.KECCAK256_NULL)},g.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(d.KECCAK256_NULL)},g}();e.Account=p;var T=function(g){try{(0,_.assertIsString)(g)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(g)};e.isValidAddress=T;var x=function(g,u){(0,_.assertIsHexString)(g);var m=(0,c.stripHexPrefix)(g).toLowerCase(),P="";if(u){var R=(0,b.toType)(u,b.TypeOutput.BN);P=R.toString()+"0x"}for(var k=(0,h.keccakFromString)(P+m).toString("hex"),z="0x",G=0;G<m.length;G++)parseInt(k[G],16)>=8?z+=m[G].toUpperCase():z+=m[G];return z};e.toChecksumAddress=x;var E=function(g,u){return(0,e.isValidAddress)(g)&&(0,e.toChecksumAddress)(g,u)===g};e.isValidChecksumAddress=E;var A=function(g,u){(0,_.assertIsBuffer)(g),(0,_.assertIsBuffer)(u);var m=new i.BN(u);return m.isZero()?(0,h.rlphash)([g,null]).slice(-20):(0,h.rlphash)([g,Buffer.from(m.toArray())]).slice(-20)};e.generateAddress=A;var S=function(g,u,m){(0,_.assertIsBuffer)(g),(0,_.assertIsBuffer)(u),(0,_.assertIsBuffer)(m),(0,n.default)(g.length===20),(0,n.default)(u.length===32);var P=(0,h.keccak256)(Buffer.concat([Buffer.from("ff","hex"),g,u,(0,h.keccak256)(m)]));return P.slice(-20)};e.generateAddress2=S;var O=function(g){return(0,a.privateKeyVerify)(g)};e.isValidPrivate=O;var K=function(g,u){return u===void 0&&(u=!1),(0,_.assertIsBuffer)(g),g.length===64?(0,a.publicKeyVerify)(Buffer.concat([Buffer.from([4]),g])):u?(0,a.publicKeyVerify)(g):!1};e.isValidPublic=K;var y=function(g,u){return u===void 0&&(u=!1),(0,_.assertIsBuffer)(g),u&&g.length!==64&&(g=Buffer.from((0,a.publicKeyConvert)(g,!1).slice(1))),(0,n.default)(g.length===64),(0,h.keccak)(g).slice(-20)};e.pubToAddress=y,e.publicToAddress=e.pubToAddress;var B=function(g){return(0,_.assertIsBuffer)(g),Buffer.from((0,a.publicKeyCreate)(g,!1)).slice(1)};e.privateToPublic=B;var $=function(g){return(0,e.publicToAddress)((0,e.privateToPublic)(g))};e.privateToAddress=$;var le=function(g){return(0,_.assertIsBuffer)(g),g.length!==64&&(g=Buffer.from((0,a.publicKeyConvert)(g,!1).slice(1))),g};e.importPublic=le;var te=function(){var g=20,u=(0,l.zeros)(g);return(0,l.bufferToHex)(u)};e.zeroAddress=te;var I=function(g){try{(0,_.assertIsString)(g)}catch{return!1}var u=(0,e.zeroAddress)();return u===g};e.isZeroAddress=I})(Kr);var ar={},Io=N&&N.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ar,"__esModule",{value:!0});ar.Address=void 0;var me=Io(Ur.exports),$e=V,It=de,Re=Kr,Co=function(){function e(r){(0,me.default)(r.length===20,"Invalid address length"),this.buf=r}return e.zero=function(){return new e((0,It.zeros)(20))},e.fromString=function(r){return(0,me.default)((0,Re.isValidAddress)(r),"Invalid address"),new e((0,It.toBuffer)(r))},e.fromPublicKey=function(r){(0,me.default)(Buffer.isBuffer(r),"Public key should be Buffer");var t=(0,Re.pubToAddress)(r);return new e(t)},e.fromPrivateKey=function(r){(0,me.default)(Buffer.isBuffer(r),"Private key should be Buffer");var t=(0,Re.privateToAddress)(r);return new e(t)},e.generate=function(r,t){return(0,me.default)($e.BN.isBN(t)),new e((0,Re.generateAddress)(r.buf,t.toArrayLike(Buffer)))},e.generate2=function(r,t,n){return(0,me.default)(Buffer.isBuffer(t)),(0,me.default)(Buffer.isBuffer(n)),new e((0,Re.generateAddress2)(r.buf,t,n))},e.prototype.equals=function(r){return this.buf.equals(r.buf)},e.prototype.isZero=function(){return this.equals(e.zero())},e.prototype.isPrecompileOrSystemAddress=function(){var r=new $e.BN(this.buf),t=new $e.BN(0),n=new $e.BN("ffff","hex");return r.gte(t)&&r.lte(n)},e.prototype.toString=function(){return"0x"+this.buf.toString("hex")},e.prototype.toBuffer=function(){return Buffer.from(this.buf)},e}();ar.Address=Co;var W={};Object.defineProperty(W,"__esModule",{value:!0});W.hashPersonalMessage=W.isValidSignature=W.fromRpcSig=W.toCompactSig=W.toRpcSig=W.ecrecover=W.ecsign=void 0;var Dr=Ut,Ne=V,Q=de,Ro=ir,Lo=Z,ue=or;function Bo(e,r,t){var n=(0,Dr.ecdsaSign)(e,r),i=n.signature,a=n.recid,c=Buffer.from(i.slice(0,32)),d=Buffer.from(i.slice(32,64));if(!t||typeof t=="number"){if(t&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");var l=t?a+(t*2+35):a+27;return{r:c,s:d,v:l}}var h=(0,ue.toType)(t,ue.TypeOutput.BN),_=h.muln(2).addn(35).addn(a).toArrayLike(Buffer);return{r:c,s:d,v:_}}W.ecsign=Bo;function sr(e,r){var t=(0,ue.toType)(e,ue.TypeOutput.BN);if(!r)return t.subn(27);var n=(0,ue.toType)(r,ue.TypeOutput.BN);return t.sub(n.muln(2).addn(35))}function ur(e){var r=new Ne.BN(e);return r.eqn(0)||r.eqn(1)}var No=function(e,r,t,n,i){var a=Buffer.concat([(0,Q.setLengthLeft)(t,32),(0,Q.setLengthLeft)(n,32)],64),c=sr(r,i);if(!ur(c))throw new Error("Invalid signature v value");var d=(0,Dr.ecdsaRecover)(a,c.toNumber(),e);return Buffer.from((0,Dr.publicKeyConvert)(d,!1).slice(1))};W.ecrecover=No;var jo=function(e,r,t,n){var i=sr(e,n);if(!ur(i))throw new Error("Invalid signature v value");return(0,Q.bufferToHex)(Buffer.concat([(0,Q.setLengthLeft)(r,32),(0,Q.setLengthLeft)(t,32),(0,Q.toBuffer)(e)]))};W.toRpcSig=jo;var Mo=function(e,r,t,n){var i=sr(e,n);if(!ur(i))throw new Error("Invalid signature v value");var a=(0,ue.toType)(e,ue.TypeOutput.Number),c=t;return(a>28&&a%2===1||a===1||a===28)&&(c=Buffer.from(t),c[0]|=128),(0,Q.bufferToHex)(Buffer.concat([(0,Q.setLengthLeft)(r,32),(0,Q.setLengthLeft)(c,32)]))};W.toCompactSig=Mo;var Do=function(e){var r=(0,Q.toBuffer)(e),t,n,i;if(r.length>=65)t=r.slice(0,32),n=r.slice(32,64),i=(0,Q.bufferToInt)(r.slice(64));else if(r.length===64)t=r.slice(0,32),n=r.slice(32,64),i=(0,Q.bufferToInt)(r.slice(32,33))>>7,n[0]&=127;else throw new Error("Invalid signature length");return i<27&&(i+=27),{v:i,r:t,s:n}};W.fromRpcSig=Do;var Uo=function(e,r,t,n,i){n===void 0&&(n=!0);var a=new Ne.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),c=new Ne.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(r.length!==32||t.length!==32||!ur(sr(e,i)))return!1;var d=new Ne.BN(r),l=new Ne.BN(t);return!(d.isZero()||d.gt(c)||l.isZero()||l.gt(c)||n&&l.cmp(a)===1)};W.isValidSignature=Uo;var Ho=function(e){(0,Lo.assertIsBuffer)(e);var r=Buffer.from(`Ethereum Signed Message:
`.concat(e.length),"utf-8");return(0,Ro.keccak)(Buffer.concat([r,e]))};W.hashPersonalMessage=Ho;var cr={},Fo=N&&N.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cr,"__esModule",{value:!0});cr.defineProperties=void 0;var Ct=Fo(Ur.exports),xo=M,Rt=V,Je=de,ko=function(e,r,t){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var a={};return e._fields.forEach(function(c){a[c]="0x".concat(e[c].toString("hex"))}),a}return(0,Je.baToJSON)(e.raw)},e.serialize=function(){return Rt.rlp.encode(e.raw)},r.forEach(function(i,a){e._fields.push(i.name);function c(){return e.raw[a]}function d(l){l=(0,Je.toBuffer)(l),l.toString("hex")==="00"&&!i.allowZero&&(l=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(l=(0,Je.unpadBuffer)(l),(0,Ct.default)(i.length>=l.length,"The field ".concat(i.name," must not have more ").concat(i.length," bytes"))):!(i.allowZero&&l.length===0)&&i.length&&(0,Ct.default)(i.length===l.length,"The field ".concat(i.name," must have byte length of ").concat(i.length)),e.raw[a]=l}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:c,set:d}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:d,get:c})}),t)if(typeof t=="string"&&(t=Buffer.from((0,xo.stripHexPrefix)(t),"hex")),Buffer.isBuffer(t)&&(t=Rt.rlp.decode(t)),Array.isArray(t)){if(t.length>e._fields.length)throw new Error("wrong number of fields in data");t.forEach(function(i,a){e[e._fields[a]]=(0,Je.toBuffer)(i)})}else if(typeof t=="object"){var n=Object.keys(t);r.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=t[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=t[i.alias])})}else throw new Error("invalid data")};cr.defineProperties=ko;(function(e){var r=N&&N.__createBinding||(Object.create?function(i,a,c,d){d===void 0&&(d=c),Object.defineProperty(i,d,{enumerable:!0,get:function(){return a[c]}})}:function(i,a,c,d){d===void 0&&(d=c),i[d]=a[c]}),t=N&&N.__exportStar||function(i,a){for(var c in i)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&r(a,i,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.isHexString=e.getKeys=e.fromAscii=e.fromUtf8=e.toAscii=e.arrayContainsArray=e.getBinarySize=e.padToEven=e.stripHexPrefix=e.isHexPrefixed=void 0,t(kr,e),t(Kr,e),t(ar,e),t(ir,e),t(W,e),t(de,e),t(cr,e),t(V,e),t(or,e);var n=M;Object.defineProperty(e,"isHexPrefixed",{enumerable:!0,get:function(){return n.isHexPrefixed}}),Object.defineProperty(e,"stripHexPrefix",{enumerable:!0,get:function(){return n.stripHexPrefix}}),Object.defineProperty(e,"padToEven",{enumerable:!0,get:function(){return n.padToEven}}),Object.defineProperty(e,"getBinarySize",{enumerable:!0,get:function(){return n.getBinarySize}}),Object.defineProperty(e,"arrayContainsArray",{enumerable:!0,get:function(){return n.arrayContainsArray}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return n.toAscii}}),Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return n.fromUtf8}}),Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return n.fromAscii}}),Object.defineProperty(e,"getKeys",{enumerable:!0,get:function(){return n.getKeys}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return n.isHexString}})})(so);var ae={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.EthereumProviderError=ce.EthereumRpcError=void 0;const Ko=Ft;class Zt extends Error{constructor(r,t,n){if(!Number.isInteger(r))throw new Error('"code" must be an integer.');if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string.');super(t);this.code=r,n!==void 0&&(this.data=n)}serialize(){const r={code:this.code,message:this.message};return this.data!==void 0&&(r.data=this.data),this.stack&&(r.stack=this.stack),r}toString(){return Ko.default(this.serialize(),Wo,2)}}ce.EthereumRpcError=Zt;class zo extends Zt{constructor(r,t,n){if(!qo(r))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(r,t,n)}}ce.EthereumProviderError=zo;function qo(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Wo(e,r){if(r!=="[Circular]")return r}var zr={},fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.errorValues=fe.errorCodes=void 0;fe.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};fe.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},"4001":{standard:"EIP-1193",message:"User rejected the request."},"4100":{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},"4200":{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},"4900":{standard:"EIP-1193",message:"The provider is disconnected from all chains."},"4901":{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const r=fe,t=ce,n=r.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",a={code:n,message:c(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function c(p,T=i){if(Number.isInteger(p)){const x=p.toString();if(b(r.errorValues,x))return r.errorValues[x].message;if(h(p))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return T}e.getMessageFromCode=c;function d(p){if(!Number.isInteger(p))return!1;const T=p.toString();return!!(r.errorValues[T]||h(p))}e.isValidCode=d;function l(p,{fallbackError:T=a,shouldIncludeStack:x=!1}={}){var E,A;if(!T||!Number.isInteger(T.code)||typeof T.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(p instanceof t.EthereumRpcError)return p.serialize();const S={};if(p&&typeof p=="object"&&!Array.isArray(p)&&b(p,"code")&&d(p.code)){const K=p;S.code=K.code,K.message&&typeof K.message=="string"?(S.message=K.message,b(K,"data")&&(S.data=K.data)):(S.message=c(S.code),S.data={originalError:_(p)})}else{S.code=T.code;const K=(E=p)===null||E===void 0?void 0:E.message;S.message=K&&typeof K=="string"?K:T.message,S.data={originalError:_(p)}}const O=(A=p)===null||A===void 0?void 0:A.stack;return x&&p&&O&&typeof O=="string"&&(S.stack=O),S}e.serializeError=l;function h(p){return p>=-32099&&p<=-32e3}function _(p){return p&&typeof p=="object"&&!Array.isArray(p)?Object.assign({},p):p}function b(p,T){return Object.prototype.hasOwnProperty.call(p,T)}})(zr);var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.ethErrors=void 0;const qr=ce,Yt=zr,q=fe;fr.ethErrors={rpc:{parse:e=>X(q.errorCodes.rpc.parse,e),invalidRequest:e=>X(q.errorCodes.rpc.invalidRequest,e),invalidParams:e=>X(q.errorCodes.rpc.invalidParams,e),methodNotFound:e=>X(q.errorCodes.rpc.methodNotFound,e),internal:e=>X(q.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:r}=e;if(!Number.isInteger(r)||r>-32005||r<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return X(r,e)},invalidInput:e=>X(q.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>X(q.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>X(q.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>X(q.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>X(q.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>X(q.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Le(q.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Le(q.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Le(q.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Le(q.errorCodes.provider.disconnected,e),chainDisconnected:e=>Le(q.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:r,message:t,data:n}=e;if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string');return new qr.EthereumProviderError(r,t,n)}}};function X(e,r){const[t,n]=Xt(r);return new qr.EthereumRpcError(e,t||Yt.getMessageFromCode(e),n)}function Le(e,r){const[t,n]=Xt(r);return new qr.EthereumProviderError(e,t||Yt.getMessageFromCode(e),n)}function Xt(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:r,data:t}=e;if(r&&typeof r!="string")throw new Error("Must specify string message.");return[r||void 0,t]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const r=ce;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return r.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return r.EthereumProviderError}});const t=zr;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const n=fr;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=fe;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(ae);var Wr={exports:{}};(function(e){(function(r,t){e.exports?e.exports=t():r.log=t()})(N,function(){var r=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function a(E,A){var S=E[A];if(typeof S.bind=="function")return S.bind(E);try{return Function.prototype.bind.call(S,E)}catch{return function(){return Function.prototype.apply.apply(S,[E,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(E){return E==="debug"&&(E="log"),typeof console===t?!1:E==="trace"&&n?c:console[E]!==void 0?a(console,E):console.log!==void 0?a(console,"log"):r}function l(E,A){for(var S=0;S<i.length;S++){var O=i[S];this[O]=S<E?r:this.methodFactory(O,E,A)}this.log=this.debug}function h(E,A,S){return function(){typeof console!==t&&(l.call(this,A,S),this[E].apply(this,arguments))}}function _(E,A,S){return d(E)||h.apply(this,arguments)}function b(E,A,S){var O=this,K;A=A==null?"WARN":A;var y="loglevel";typeof E=="string"?y+=":"+E:typeof E=="symbol"&&(y=void 0);function B(I){var g=(i[I]||"silent").toUpperCase();if(!(typeof window===t||!y)){try{window.localStorage[y]=g;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+g+";"}catch{}}}function $(){var I;if(!(typeof window===t||!y)){try{I=window.localStorage[y]}catch{}if(typeof I===t)try{var g=window.document.cookie,u=g.indexOf(encodeURIComponent(y)+"=");u!==-1&&(I=/^([^;]+)/.exec(g.slice(u))[1])}catch{}return O.levels[I]===void 0&&(I=void 0),I}}function le(){if(!(typeof window===t||!y)){try{window.localStorage.removeItem(y);return}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}O.name=E,O.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},O.methodFactory=S||_,O.getLevel=function(){return K},O.setLevel=function(I,g){if(typeof I=="string"&&O.levels[I.toUpperCase()]!==void 0&&(I=O.levels[I.toUpperCase()]),typeof I=="number"&&I>=0&&I<=O.levels.SILENT){if(K=I,g!==!1&&B(I),l.call(O,I,E),typeof console===t&&I<O.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+I},O.setDefaultLevel=function(I){A=I,$()||O.setLevel(I,!1)},O.resetLevel=function(){O.setLevel(A,!1),le()},O.enableAll=function(I){O.setLevel(O.levels.TRACE,I)},O.disableAll=function(I){O.setLevel(O.levels.SILENT,I)};var te=$();te==null&&(te=A),O.setLevel(te,!1)}var p=new b,T={};p.getLogger=function(A){if(typeof A!="symbol"&&typeof A!="string"||A==="")throw new TypeError("You must supply a name when creating a logger.");var S=T[A];return S||(S=T[A]=new b(A,p.getLevel(),p.methodFactory)),S};var x=typeof window!==t?window.log:void 0;return p.noConflict=function(){return typeof window!==t&&window.log===p&&(window.log=x),p},p.getLoggers=function(){return T},p.default=p,p})})(Wr);var Qe=Wr.exports,Lt={exports:{}};(function(e,r){var t=200,n="__lodash_hash_undefined__",i=800,a=16,c=9007199254740991,d="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",_="[object Boolean]",b="[object Date]",p="[object Error]",T="[object Function]",x="[object GeneratorFunction]",E="[object Map]",A="[object Number]",S="[object Null]",O="[object Object]",K="[object Proxy]",y="[object RegExp]",B="[object Set]",$="[object String]",le="[object Undefined]",te="[object WeakMap]",I="[object ArrayBuffer]",g="[object DataView]",u="[object Float32Array]",m="[object Float64Array]",P="[object Int8Array]",R="[object Int16Array]",k="[object Int32Array]",z="[object Uint8Array]",G="[object Uint8ClampedArray]",se="[object Uint16Array]",hr="[object Uint32Array]",an=/[\\^$.*+?()[\]{}|]/g,sn=/^\[object .+?Constructor\]$/,un=/^(?:0|[1-9]\d*)$/,D={};D[u]=D[m]=D[P]=D[R]=D[k]=D[z]=D[G]=D[se]=D[hr]=!0,D[d]=D[l]=D[I]=D[_]=D[g]=D[b]=D[p]=D[T]=D[E]=D[A]=D[O]=D[y]=D[B]=D[$]=D[te]=!1;var Gr=typeof N=="object"&&N&&N.Object===Object&&N,cn=typeof self=="object"&&self&&self.Object===Object&&self,Ae=Gr||cn||Function("return this")(),Vr=r&&!r.nodeType&&r,Oe=Vr&&!0&&e&&!e.nodeType&&e,$r=Oe&&Oe.exports===Vr,gr=$r&&Gr.process,Jr=function(){try{var o=Oe&&Oe.require&&Oe.require("util").types;return o||gr&&gr.binding&&gr.binding("util")}catch{}}(),Zr=Jr&&Jr.isTypedArray;function fn(o,s,f){switch(f.length){case 0:return o.call(s);case 1:return o.call(s,f[0]);case 2:return o.call(s,f[0],f[1]);case 3:return o.call(s,f[0],f[1],f[2])}return o.apply(s,f)}function dn(o,s){for(var f=-1,v=Array(o);++f<o;)v[f]=s(f);return v}function ln(o){return function(s){return o(s)}}function hn(o,s){return o==null?void 0:o[s]}function gn(o,s){return function(f){return o(s(f))}}var pn=Array.prototype,mn=Function.prototype,Fe=Object.prototype,pr=Ae["__core-js_shared__"],xe=mn.toString,ne=Fe.hasOwnProperty,Yr=function(){var o=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Xr=Fe.toString,vn=xe.call(Object),yn=RegExp("^"+xe.call(ne).replace(an,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=$r?Ae.Buffer:void 0,Qr=Ae.Symbol,et=Ae.Uint8Array,rt=ke?ke.allocUnsafe:void 0,tt=gn(Object.getPrototypeOf,Object),nt=Object.create,_n=Fe.propertyIsEnumerable,wn=pn.splice,he=Qr?Qr.toStringTag:void 0,Ke=function(){try{var o=yr(Object,"defineProperty");return o({},"",{}),o}catch{}}(),bn=ke?ke.isBuffer:void 0,it=Math.max,En=Date.now,ot=yr(Ae,"Map"),Te=yr(Object,"create"),Sn=function(){function o(){}return function(s){if(!pe(s))return{};if(nt)return nt(s);o.prototype=s;var f=new o;return o.prototype=void 0,f}}();function ge(o){var s=-1,f=o==null?0:o.length;for(this.clear();++s<f;){var v=o[s];this.set(v[0],v[1])}}function An(){this.__data__=Te?Te(null):{},this.size=0}function On(o){var s=this.has(o)&&delete this.__data__[o];return this.size-=s?1:0,s}function Tn(o){var s=this.__data__;if(Te){var f=s[o];return f===n?void 0:f}return ne.call(s,o)?s[o]:void 0}function Pn(o){var s=this.__data__;return Te?s[o]!==void 0:ne.call(s,o)}function In(o,s){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=Te&&s===void 0?n:s,this}ge.prototype.clear=An,ge.prototype.delete=On,ge.prototype.get=Tn,ge.prototype.has=Pn,ge.prototype.set=In;function ie(o){var s=-1,f=o==null?0:o.length;for(this.clear();++s<f;){var v=o[s];this.set(v[0],v[1])}}function Cn(){this.__data__=[],this.size=0}function Rn(o){var s=this.__data__,f=ze(s,o);if(f<0)return!1;var v=s.length-1;return f==v?s.pop():wn.call(s,f,1),--this.size,!0}function Ln(o){var s=this.__data__,f=ze(s,o);return f<0?void 0:s[f][1]}function Bn(o){return ze(this.__data__,o)>-1}function Nn(o,s){var f=this.__data__,v=ze(f,o);return v<0?(++this.size,f.push([o,s])):f[v][1]=s,this}ie.prototype.clear=Cn,ie.prototype.delete=Rn,ie.prototype.get=Ln,ie.prototype.has=Bn,ie.prototype.set=Nn;function _e(o){var s=-1,f=o==null?0:o.length;for(this.clear();++s<f;){var v=o[s];this.set(v[0],v[1])}}function jn(){this.size=0,this.__data__={hash:new ge,map:new(ot||ie),string:new ge}}function Mn(o){var s=We(this,o).delete(o);return this.size-=s?1:0,s}function Dn(o){return We(this,o).get(o)}function Un(o){return We(this,o).has(o)}function Hn(o,s){var f=We(this,o),v=f.size;return f.set(o,s),this.size+=f.size==v?0:1,this}_e.prototype.clear=jn,_e.prototype.delete=Mn,_e.prototype.get=Dn,_e.prototype.has=Un,_e.prototype.set=Hn;function we(o){var s=this.__data__=new ie(o);this.size=s.size}function Fn(){this.__data__=new ie,this.size=0}function xn(o){var s=this.__data__,f=s.delete(o);return this.size=s.size,f}function kn(o){return this.__data__.get(o)}function Kn(o){return this.__data__.has(o)}function zn(o,s){var f=this.__data__;if(f instanceof ie){var v=f.__data__;if(!ot||v.length<t-1)return v.push([o,s]),this.size=++f.size,this;f=this.__data__=new _e(v)}return f.set(o,s),this.size=f.size,this}we.prototype.clear=Fn,we.prototype.delete=xn,we.prototype.get=kn,we.prototype.has=Kn,we.prototype.set=zn;function qn(o,s){var f=br(o),v=!f&&wr(o),L=!f&&!v&&ft(o),j=!f&&!v&&!L&&lt(o),H=f||v||L||j,C=H?dn(o.length,String):[],F=C.length;for(var Y in o)(s||ne.call(o,Y))&&!(H&&(Y=="length"||L&&(Y=="offset"||Y=="parent")||j&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||ut(Y,F)))&&C.push(Y);return C}function mr(o,s,f){(f!==void 0&&!Ge(o[s],f)||f===void 0&&!(s in o))&&vr(o,s,f)}function Wn(o,s,f){var v=o[s];(!(ne.call(o,s)&&Ge(v,f))||f===void 0&&!(s in o))&&vr(o,s,f)}function ze(o,s){for(var f=o.length;f--;)if(Ge(o[f][0],s))return f;return-1}function vr(o,s,f){s=="__proto__"&&Ke?Ke(o,s,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[s]=f}var Gn=oi();function qe(o){return o==null?o===void 0?le:S:he&&he in Object(o)?ai(o):li(o)}function at(o){return Pe(o)&&qe(o)==d}function Vn(o){if(!pe(o)||fi(o))return!1;var s=Sr(o)?yn:sn;return s.test(mi(o))}function $n(o){return Pe(o)&&dt(o.length)&&!!D[qe(o)]}function Jn(o){if(!pe(o))return di(o);var s=ct(o),f=[];for(var v in o)v=="constructor"&&(s||!ne.call(o,v))||f.push(v);return f}function st(o,s,f,v,L){o!==s&&Gn(s,function(j,H){if(L||(L=new we),pe(j))Zn(o,s,H,f,st,v,L);else{var C=v?v(_r(o,H),j,H+"",o,s,L):void 0;C===void 0&&(C=j),mr(o,H,C)}},ht)}function Zn(o,s,f,v,L,j,H){var C=_r(o,f),F=_r(s,f),Y=H.get(F);if(Y){mr(o,f,Y);return}var J=j?j(C,F,f+"",o,s,H):void 0,Ie=J===void 0;if(Ie){var Ar=br(F),Or=!Ar&&ft(F),pt=!Ar&&!Or&&lt(F);J=F,Ar||Or||pt?br(C)?J=C:vi(C)?J=ti(C):Or?(Ie=!1,J=Qn(F,!0)):pt?(Ie=!1,J=ri(F,!0)):J=[]:yi(F)||wr(F)?(J=C,wr(C)?J=_i(C):(!pe(C)||Sr(C))&&(J=si(F))):Ie=!1}Ie&&(H.set(F,J),L(J,F,v,j,H),H.delete(F)),mr(o,f,J)}function Yn(o,s){return gi(hi(o,s,gt),o+"")}var Xn=Ke?function(o,s){return Ke(o,"toString",{configurable:!0,enumerable:!1,value:bi(s),writable:!0})}:gt;function Qn(o,s){if(s)return o.slice();var f=o.length,v=rt?rt(f):new o.constructor(f);return o.copy(v),v}function ei(o){var s=new o.constructor(o.byteLength);return new et(s).set(new et(o)),s}function ri(o,s){var f=s?ei(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function ti(o,s){var f=-1,v=o.length;for(s||(s=Array(v));++f<v;)s[f]=o[f];return s}function ni(o,s,f,v){var L=!f;f||(f={});for(var j=-1,H=s.length;++j<H;){var C=s[j],F=v?v(f[C],o[C],C,f,o):void 0;F===void 0&&(F=o[C]),L?vr(f,C,F):Wn(f,C,F)}return f}function ii(o){return Yn(function(s,f){var v=-1,L=f.length,j=L>1?f[L-1]:void 0,H=L>2?f[2]:void 0;for(j=o.length>3&&typeof j=="function"?(L--,j):void 0,H&&ui(f[0],f[1],H)&&(j=L<3?void 0:j,L=1),s=Object(s);++v<L;){var C=f[v];C&&o(s,C,v,j)}return s})}function oi(o){return function(s,f,v){for(var L=-1,j=Object(s),H=v(s),C=H.length;C--;){var F=H[o?C:++L];if(f(j[F],F,j)===!1)break}return s}}function We(o,s){var f=o.__data__;return ci(s)?f[typeof s=="string"?"string":"hash"]:f.map}function yr(o,s){var f=hn(o,s);return Vn(f)?f:void 0}function ai(o){var s=ne.call(o,he),f=o[he];try{o[he]=void 0;var v=!0}catch{}var L=Xr.call(o);return v&&(s?o[he]=f:delete o[he]),L}function si(o){return typeof o.constructor=="function"&&!ct(o)?Sn(tt(o)):{}}function ut(o,s){var f=typeof o;return s=s==null?c:s,!!s&&(f=="number"||f!="symbol"&&un.test(o))&&o>-1&&o%1==0&&o<s}function ui(o,s,f){if(!pe(f))return!1;var v=typeof s;return(v=="number"?Er(f)&&ut(s,f.length):v=="string"&&s in f)?Ge(f[s],o):!1}function ci(o){var s=typeof o;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?o!=="__proto__":o===null}function fi(o){return!!Yr&&Yr in o}function ct(o){var s=o&&o.constructor,f=typeof s=="function"&&s.prototype||Fe;return o===f}function di(o){var s=[];if(o!=null)for(var f in Object(o))s.push(f);return s}function li(o){return Xr.call(o)}function hi(o,s,f){return s=it(s===void 0?o.length-1:s,0),function(){for(var v=arguments,L=-1,j=it(v.length-s,0),H=Array(j);++L<j;)H[L]=v[s+L];L=-1;for(var C=Array(s+1);++L<s;)C[L]=v[L];return C[s]=f(H),fn(o,this,C)}}function _r(o,s){if(!(s==="constructor"&&typeof o[s]=="function")&&s!="__proto__")return o[s]}var gi=pi(Xn);function pi(o){var s=0,f=0;return function(){var v=En(),L=a-(v-f);if(f=v,L>0){if(++s>=i)return arguments[0]}else s=0;return o.apply(void 0,arguments)}}function mi(o){if(o!=null){try{return xe.call(o)}catch{}try{return o+""}catch{}}return""}function Ge(o,s){return o===s||o!==o&&s!==s}var wr=at(function(){return arguments}())?at:function(o){return Pe(o)&&ne.call(o,"callee")&&!_n.call(o,"callee")},br=Array.isArray;function Er(o){return o!=null&&dt(o.length)&&!Sr(o)}function vi(o){return Pe(o)&&Er(o)}var ft=bn||Ei;function Sr(o){if(!pe(o))return!1;var s=qe(o);return s==T||s==x||s==h||s==K}function dt(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=c}function pe(o){var s=typeof o;return o!=null&&(s=="object"||s=="function")}function Pe(o){return o!=null&&typeof o=="object"}function yi(o){if(!Pe(o)||qe(o)!=O)return!1;var s=tt(o);if(s===null)return!0;var f=ne.call(s,"constructor")&&s.constructor;return typeof f=="function"&&f instanceof f&&xe.call(f)==vn}var lt=Zr?ln(Zr):$n;function _i(o){return ni(o,ht(o))}function ht(o){return Er(o)?qn(o,!0):Jn(o)}var wi=ii(function(o,s,f){st(o,s,f)});function bi(o){return function(){return o}}function gt(o){return o}function Ei(){return!1}e.exports=wi})(Lt,Lt.exports);const Go=Qe.getLogger("http-helpers");Go.setLevel(Wr.exports.levels.INFO);oo();const Be={IFRAME_STATUS:"iframe_status",CREATE_WINDOW:"create_window",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},ee={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",OPENED_WINDOW:"opened_window",CLOSED_WINDOW:"closed_window",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key"},Vo={GET_PROVIDER_STATE:"wallet_get_provider_state"},Ir={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function $o(e){return function(t,n,i){i(a=>{n.error&&Qe.warn(`Error in RPC response:
`,n),!t.isTorusInternal&&(Qe.info("RPC (".concat(e.origin,"):"),t,"->",n),a())})}}var Bt;(function(e){e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.failed="failed",e.finalized="finalized",e.processed="processed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved",e.dropped="dropped",e.expired="expired"})(Bt||(Bt={}));function Qt(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function Jo(e){return Qt(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}function Zo(e){return Qt(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"}function Yo(e){return Jo(e)&&Zo(e)}var Xo=function e(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var n,i,a;if(Array.isArray(r)){if(n=r.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!e(r[i],t[i]))return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===t.toString();if(a=Object.keys(r),n=a.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=n;i--!==0;){var c=a[i];if(!e(r[c],t[c]))return!1}return!0}return r!==r&&t!==t},re={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>"Torus: The Torus Ethereum provider does not support synchronous methods like ".concat(e," without a callback parameter."),invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>"Invalid options. Received: { maxEventListeners: ".concat(e,"}"),invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>"'args.logger' must include required method '".concat(e,"'.")},info:{connected:e=>'Torus: Connected to chain with ID "'.concat(e,'".')},warnings:{}};const _a={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak"},Qo={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},je={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},Cr={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless"},ea={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xF6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"\u7D99\u7D9A\u3059\u308B",actionRequired:"\u8A8D\u8A3C\u304C\u5FC5\u8981\u3067\u3059",pendingAction:"\u7D9A\u884C\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u3001\u30DD\u30C3\u30D7\u30A2\u30C3\u30D7\u3067\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u7D9A\u884C\u3057\u307E\u3059",cookiesRequired:"\u5FC5\u8981\u306A\u30AF\u30C3\u30AD\u30FC",enableCookies:"Torus\u306B\u30A2\u30AF\u30BB\u30B9\u3059\u308B\u306B\u306F\u3001\u30D6\u30E9\u30A6\u30B6\u306E\u8A2D\u5B9A\u3067Cookie\u3092\u6709\u52B9\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",clickHere:"\u8A73\u3057\u304F\u306F"}},ko:{embed:{continue:"\uACC4\uC18D\uD558\uB2E4",actionRequired:"\uC2B9\uC778 \uD544\uC694",pendingAction:"\uD31D\uC5C5\uC5D0\uC11C \uC694\uCCAD\uC744 \uC9C4\uD589\uD558\uB824\uBA74 \uACC4\uC18D\uC744 \uD074\uB9AD\uD558\uC2ED\uC2DC\uC624.",cookiesRequired:"\uCFE0\uD0A4 \uD544\uC694",enableCookies:"\uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD \uC124\uC815\uC5D0\uC11C \uCFE0\uD0A4\uB97C \uD65C\uC131\uD654\uD558\uC5EC Torus\uC5D0 \uC561\uC138\uC2A4\uD558\uC2ED\uC2DC\uC624.",clickHere:"\uB354 \uB9CE\uC740 \uC815\uBCF4"}},zh:{embed:{continue:"\u7EE7\u7EED",actionRequired:"\u9700\u8981\u6388\u6743",pendingAction:"\u5355\u51FB\u7EE7\u7EED\u4EE5\u5728\u5F39\u51FA\u7A97\u53E3\u4E2D\u7EE7\u7EED\u60A8\u7684\u8BF7\u6C42",cookiesRequired:"\u5FC5\u586BCookie",enableCookies:"\u8BF7\u5728\u60A8\u7684\u6D4F\u89C8\u5668\u9996\u9009\u9879\u4E2D\u542F\u7528cookie\u4EE5\u8BBF\u95EETorus\u3002",clickHere:"\u66F4\u591A\u4FE1\u606F"}}};var er={supportedVerifierList:[Cr.GOOGLE,Cr.REDDIT,Cr.DISCORD],api:"https://api.tor.us",translations:ea,prodTorusUrl:"",localStorageKey:"torus-".concat(window.location.hostname)},U=Qe.getLogger("solana-embed");function ra(){return(e,r,t)=>{(typeof e.method!="string"||!e.method)&&(r.error=ae.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),t(n=>{const{error:i}=r;return i&&U.error("Torus - RPC Error: ".concat(i.message),i),n()})}}function ta(e,r,t){let n='Torus: Lost connection to "'.concat(e,'".');r!=null&&r.stack&&(n+=`
`.concat(r.stack)),U.warn(n),t&&t.listenerCount("error")>0&&t.emit("error",n)}const Ze=()=>Math.random().toString(36).slice(2),en=async e=>{let r,t;switch(e){case"testing":r="https://solana-testing.tor.us",t="debug";break;case"development":r="http://localhost:8080",t="debug";break;default:r="https://solana.tor.us",t="error";break}return{torusUrl:r,logLevel:t}},na=()=>{let e=window.navigator.language||"en-US";const r=e.split("-");return e=Object.prototype.hasOwnProperty.call(er.translations,r[0])?r[0]:"en",e},ia={height:660,width:375},oa={height:740,width:1315},aa={height:700,width:1200},rn={height:600,width:400};function sa(e){let r;try{r=window[e];const t="__storage_test__";return r.setItem(t,t),r.removeItem(t),!0}catch(t){return t&&(t.code===22||t.code===1014||t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&r&&r.length!==0}}function Me(e){let{width:r,height:t}=e;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,d=1,l=Math.abs((a-r)/2/d+n),h=Math.abs((c-t)/2/d+i);return"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(t/d,",width=").concat(r/d,",top=").concat(h,",left=").concat(l)}const ua=e=>{switch(e){case"mainnet-beta":return{blockExplorerUrl:"https://explorer.solana.com",chainId:"0x1",displayName:"Solana Mainnet",logo:"solana.svg",rpcTarget:"https://api.mainnet-beta.solana.com",ticker:"SOL",tickerName:"Solana Token"};case"testnet":return{blockExplorerUrl:"https://explorer.solana.com",chainId:"0x2",displayName:"Solana Testnet",logo:"solana.svg",rpcTarget:"https://api.testnet.solana.com",ticker:"SOL",tickerName:"Solana Token"};case"devnet":return{blockExplorerUrl:"https://explorer.solana.com",chainId:"0x3",displayName:"Solana Devnet",logo:"solana.svg",rpcTarget:"https://api.devnet.solana.com",ticker:"SOL",tickerName:"Solana Token"};default:return}};class tn extends nr{constructor(r,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;super();if(w(this,"isTorus",void 0),w(this,"_rpcEngine",void 0),w(this,"jsonRpcConnectionEvents",void 0),w(this,"_state",void 0),!Yo(r))throw new Error(re.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const a=new no;yt(r,a,r,this._handleStreamDisconnect.bind(this,"Torus")),a.ignoreStream("phishing");const c=Qi();yt(c.stream,a.createStream(i),c.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const d=new oe;d.push(eo()),d.push(ra()),d.push($o({origin:location.origin})),d.push(c.middleware),this._rpcEngine=d,this.jsonRpcConnectionEvents=c.events}async request(r){if(!r||typeof r!="object"||Array.isArray(r))throw ae.ethErrors.rpc.invalidRequest({message:re.errors.invalidRequestArgs(),data:r});const{method:t,params:n}=r;if(typeof t!="string"||t.length===0)throw ae.ethErrors.rpc.invalidRequest({message:re.errors.invalidRequestMethod(),data:r});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw ae.ethErrors.rpc.invalidRequest({message:re.errors.invalidRequestParams(),data:r});return new Promise((i,a)=>{this._rpcRequest({method:t,params:n},Mr(i,a))})}send(r,t){this._rpcRequest(r,t)}sendAsync(r){return new Promise((t,n)=>{this._rpcRequest(r,Mr(t,n))})}_handleStreamDisconnect(r,t){ta(r,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const ca=function(e,r,t){for(var n=arguments.length,i=new Array(n>3?n-3:0),a=3;a<n;a++)i[a-3]=arguments[a];const c=()=>{t(...i),e.removeEventListener(r,c)};e.addEventListener(r,c)};async function nn(){return new Promise(e=>{document.readyState!=="loading"?e():ca(document,"DOMContentLoaded",e)})}const Ee=e=>{const r=window.document.createElement("template"),t=e.trim();return r.innerHTML=t,r.content.firstChild};class on extends nr{constructor(r){let{url:t,target:n,features:i}=r;super();w(this,"url",void 0),w(this,"target",void 0),w(this,"features",void 0),w(this,"window",void 0),w(this,"windowTimer",void 0),w(this,"iClosedWindow",void 0),this.url=t,this.target=n||"_blank",this.features=i||Me(aa),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var r;return this.window=window.open(this.url.href,this.target,this.features),(r=this.window)!==null&&r!==void 0&&r.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(r){r?window.location.replace(this.url.href):window.location.href=this.url.href}}function Nt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function fa(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Nt(Object(t),!0).forEach(function(n){w(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Nt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}class dr extends tn{constructor(r,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;super(r,{maxEventListeners:n,jsonRpcStreamName:i});w(this,"embedTranslations",void 0),w(this,"torusUrl",void 0),w(this,"dappStorageKey",void 0),w(this,"windowRefs",void 0),w(this,"tryWindowHandle",void 0),w(this,"torusAlertContainer",void 0),w(this,"torusIframe",void 0),this._state=fa({},dr._defaultState),this.torusUrl="",this.dappStorageKey="";const a=er.translations[na()];this.embedTranslations=a.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const c=d=>{const{method:l,params:h}=d;if(l===Be.IFRAME_STATUS){const{isFullScreen:_,rid:b}=h;this._displayIframe({isFull:_,rid:b})}else if(l===Be.CREATE_WINDOW){const{windowId:_,url:b}=h;this._createPopupBlockAlert(_,b)}else if(l===Be.CLOSE_WINDOW)this._handleCloseWindow(h);else if(l===Be.USER_LOGGED_IN){const{currentLoginProvider:_}=h;this._state.isLoggedIn=!0,this._state.currentLoginProvider=_}else l===Be.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",c)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(r){try{const{torusUrl:t,dappStorageKey:n,torusAlertContainer:i,torusIframe:a}=r;this.torusUrl=t,this.dappStorageKey=n,this.torusAlertContainer=i,this.torusIframe=a,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:c,isLoggedIn:d}=await this.request({method:ee.GET_PROVIDER_STATE,params:[]});this._handleConnect(c,d)}catch(t){U.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{U.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(r){let{url:t,target:n,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=new URL(t||"".concat(this.torusUrl,"/redirect?windowId=").concat(r));this.dappStorageKey&&(a.hash?a.hash+="&dappStorageKey=".concat(this.dappStorageKey):a.hash="#dappStorageKey=".concat(this.dappStorageKey));const c=new on({url:a,target:n,features:i});if(c.open(),!c.window){this._createPopupBlockAlert(r,a.href);return}this.windowRefs[r]=c,this.request({method:ee.OPENED_WINDOW,params:{windowId:r}}),c.once("close",()=>{delete this.windowRefs[r],this.request({method:ee.CLOSED_WINDOW,params:{windowId:r}})})}_displayIframe(){let{isFull:r=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(r)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case je.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case je.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case je.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case je.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=r,this.request({method:ee.IFRAME_STATUS,params:{isIFrameFullScreen:r,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(r,t){const n=t,i=r;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,n)}_handleConnect(r,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:r,isLoggedIn:t}),U.debug(re.info.connected(r)))}_handleDisconnect(r,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!r){this._state.isConnected=!1;let n;r?(n=new ae.EthereumRpcError(1013,t||re.errors.disconnected()),U.debug(n)):(n=new ae.EthereumRpcError(1011,t||re.errors.permanentlyDisconnected()),U.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(r){const{windowId:t}=r;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(r,t){const n=this.getLogoUrl(),i=Ee('<div id="torusAlert" class="torus-alert--v2">'+'<div id="torusAlert__logo"><img src="'.concat(n,'" /></div>')+"<div>"+'<h1 id="torusAlert__title">'.concat(this.embedTranslations.actionRequired,"</h1>")+'<p id="torusAlert__desc">'.concat(this.embedTranslations.pendingAction,"</p>")+"</div></div>"),a=Ee('<div><a id="torusAlert__btn">'.concat(this.embedTranslations.continue,"</a></div>")),c=Ee('<div id="torusAlert__btn-container"></div>');c.appendChild(a),i.appendChild(c);const d=()=>{a.addEventListener("click",()=>{this._handleWindow(r,{url:t,target:"_blank",features:Me(rn)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})},l=()=>{this.torusAlertContainer.appendChild(i)};await nn(),l(),d(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return"".concat(this.torusUrl,"/images/torus_icon-blue.svg")}}w(dr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});function jt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function da(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?jt(Object(t),!0).forEach(function(n){w(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}class lr extends tn{constructor(r,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;super(r,{maxEventListeners:n,jsonRpcStreamName:i});w(this,"chainId",void 0),w(this,"selectedAddress",void 0),w(this,"tryWindowHandle",void 0),this._state=da({},lr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const a=c=>{const{method:d,params:l}=c;d===Ir.ACCOUNTS_CHANGED?this._handleAccountsChanged(l):d===Ir.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(l):d===Ir.CHAIN_CHANGED&&this._handleChainChanged(l)};this.jsonRpcConnectionEvents.on("notification",a)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:r,chainId:t,isUnlocked:n}=await this.request({method:Vo.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:r,isUnlocked:n}),this._handleAccountsChanged(r)}catch(r){U.error("Torus: Failed to get initial state. Please report this bug.",r)}finally{U.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(r,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;const a=r;if(!Array.isArray(a)){if(a.jsonrpc||(a.jsonrpc="2.0"),a.method==="solana_accounts"||a.method==="solana_requestAccounts")i=(c,d)=>{this._handleAccountsChanged(d.result||[],a.method==="solana_accounts",n),t(c,d)};else if(a.method==="wallet_getProviderState"){this._rpcEngine.handle(r,i);return}}this.tryWindowHandle(a,i)}_handleConnect(r){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:r}),U.debug(re.info.connected(r)))}_handleDisconnect(r,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!r){this._state.isConnected=!1;let n;r?(n=new ae.EthereumRpcError(1013,t||re.errors.disconnected()),U.debug(n)):(n=new ae.EthereumRpcError(1011,t||re.errors.permanentlyDisconnected()),U.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r;Array.isArray(i)||(U.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const a of r)if(typeof a!="string"){U.error("Torus: Received non-string account. Please report this bug.",r),i=[];break}Xo(this._state.accounts,i)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&U.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!r){U.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:r});return}r==="loading"?this._handleDisconnect(!0):(this._handleConnect(r),r!==this.chainId&&(this.chainId=r,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:r,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){U.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(r||[]))}}w(lr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Mt(e){return new Promise((r,t)=>{try{const n=document.createElement("img");n.onload=()=>r(!0),n.onerror=()=>r(!1),n.src=e}catch(n){t(n)}})}const la=e=>{const{document:r}=e,t=r.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const n=r.querySelector('head > meta[name="title"]');return n?n.content:r.title&&r.title.length>0?r.title:e.location.hostname};async function ha(e){try{const{document:r}=e;let t=r.querySelector('head > link[rel="shortcut icon"]');return t&&await Mt(t.href)||(t=Array.from(r.querySelectorAll('head > link[rel="icon"]')).find(n=>Boolean(n.href)),t&&await Mt(t.href))?t.href:""}catch{return""}}const ga=async()=>({name:la(window),icon:await ha(window)});function Dt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function Rr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Dt(Object(t),!0).forEach(function(n){w(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}const pa=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],ma=[ee.SET_PROVIDER],va=sa("localStorage");(async function(){try{if(typeof document=="undefined")return;const r=document.createElement("link"),{torusUrl:t}=await en("production");r.href="".concat(t,"/frame"),r.crossOrigin="anonymous",r.type="text/html",r.rel="prefetch",r.relList&&r.relList.supports&&r.relList.supports("prefetch")&&document.head.appendChild(r)}catch(r){U.warn(r)}})();class wa{constructor(){let{modalZIndex:r=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};w(this,"isInitialized",void 0),w(this,"torusAlert",void 0),w(this,"modalZIndex",void 0),w(this,"alertZIndex",void 0),w(this,"requestedLoginProvider",void 0),w(this,"provider",void 0),w(this,"communicationProvider",void 0),w(this,"dappStorageKey",void 0),w(this,"torusAlertContainer",void 0),w(this,"torusUrl",void 0),w(this,"torusIframe",void 0),w(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=r,this.alertZIndex=r+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:r=Qo.PRODUCTION,enableLogging:t=!1,network:n,showTorusButton:i=!1,useLocalStorage:a=!1,buttonPosition:c=je.BOTTOM_LEFT,apiKey:d="torus-default",extraParams:l={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:h,logLevel:_}=await en(r);U.info(h,"url loaded"),this.torusUrl=h,U.setDefaultLevel(_),t?U.enableAll():U.disableAll();const b=this.handleDappStorageKey(a),p=new URL(h);p.pathname.endsWith("/")?p.pathname+="frame":p.pathname+="/frame";const T=new URLSearchParams;b&&T.append("dappStorageKey",b),T.append("origin",window.location.origin),p.hash=T.toString(),this.torusIframe=Ee(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="`.concat(p.href,`"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: `).concat(this.modalZIndex.toString(),`"
      ></iframe>`)),this.torusAlertContainer=Ee('<div id="torusAlertContainer" style="display:none; z-index: '.concat(this.alertZIndex.toString(),'"></div>')),this.styleLink=Ee('<link href="'.concat(h,'/css/widget.css" rel="stylesheet" type="text/css">'));const x=async()=>new Promise((E,A)=>{try{window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer),this.torusIframe.addEventListener("load",async()=>{const S=await ga();this.torusIframe.contentWindow.postMessage({buttonPosition:c,apiKey:d,network:typeof n=="string"?ua(n):n,dappMetadata:S,extraParams:l},p.origin),await this._setupWeb3({torusUrl:h}),i?this.showTorusButton():this.hideTorusButton(),this.isInitialized=!0,window.torus=this,E()})}catch(S){A(S)}});await nn(),await x()}async login(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=r.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((n,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,r.login_hint]},Mr(n,i))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw U.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:ee.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function r(t){return t instanceof Element||t instanceof Document}r(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),r(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),r(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(r){await this.communicationProvider.request({method:ee.SET_PROVIDER,params:Rr({},r)})}async showWallet(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:ee.WALLET_INSTANCE_ID,params:[]}),i=r?"/".concat(r):"",a=new URL("".concat(this.torusUrl,"/wallet").concat(i));a.searchParams.append("instanceId",n),Object.keys(t).forEach(d=>{a.searchParams.append(d,t[d])}),this.dappStorageKey&&(a.hash="#dappStorageKey=".concat(this.dappStorageKey)),new on({url:a,features:Me(oa)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:ee.USER_INFO,params:[]})}async initiateTopup(r,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=Ze();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:ee.TOPUP,params:{provider:r,params:t,windowId:n}})}async sendTransaction(r){return await this.provider.request({method:"send_transaction",params:{message:r.serialize({requireAllSignatures:!1}).toString("hex")}})}async signTransaction(r){const t=await this.provider.request({method:"sign_transaction",params:{message:r.serialize({requireAllSignatures:!1}).toString("hex")}}),n=Buffer.from(t,"hex");return mt.from(n)}async signAllTransactions(r){const t=r.map(a=>a.serialize({requireAllSignatures:!1}).toString("hex"));return(await this.provider.request({method:"sign_all_transactions",params:{message:t}})).map(a=>mt.from(Buffer.from(a,"hex")))}async signMessage(r){return await this.provider.request({method:"sign_message",params:{data:r}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(r){let t="";if(va&&r){const n=window.localStorage.getItem(er.localStorageKey);if(n)t=n;else{const i="torus-app-".concat(Ze());window.localStorage.setItem(er.localStorageKey,i),t=i}}return this.dappStorageKey=t,t}async _setupWeb3(r){U.info("setupWeb3 running");const t=new bt({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new bt({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new lr(t,{}),a=new dr(n,{});i.tryWindowHandle=(h,_)=>{const b=h;if(!Array.isArray(b)&&pa.includes(b.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const p=Ze();a._handleWindow(p,{target:"_blank",features:Me(rn)}),b.windowId=p}i._rpcEngine.handle(b,_)},a.tryWindowHandle=(h,_)=>{const b=h;if(!Array.isArray(b)&&ma.includes(b.method)){const p=Ze();a._handleWindow(p,{target:"_blank",features:Me(ia)}),b.params.windowId=p}a._rpcEngine.handle(b,_)};const c=h=>{const _=i[h],b=this;i[h]=function(T,x){const{method:E,params:A=[]}=T;if(E==="solana_requestAccounts"){if(!x)return b.login({loginProvider:A[0]});b.login({loginProvider:A[0]}).then(S=>x(null,S)).catch(S=>x(S))}return _.apply(this,[T,x])}};c("request"),c("sendAsync"),c("send");const d=new Proxy(i,{deleteProperty:()=>!0}),l=new Proxy(a,{deleteProperty:()=>!0});this.provider=d,this.communicationProvider=l,await Promise.all([i._initializeState(),a._initializeState(Rr(Rr({},r),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),U.debug("Torus - injected provider")}}export{je as BUTTON_POSITION,Cr as LOGIN_PROVIDER,_a as PAYMENT_PROVIDER,Qo as TORUS_BUILD_ENV,lr as TorusInPageProvider,wa as default};
