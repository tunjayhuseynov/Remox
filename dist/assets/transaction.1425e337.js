import{k as F,bg as q,Q as m,S as $,s as B,au as I,u as M,f as P,Z as U,r as C,j as c,a as r,b as G,B as A,p as b}from"./index.dc867373.js";import{u as K}from"./useMultisigProcess.fcf823a5.js";import{E as Q}from"./error.38595cb0.js";import"./useMultiWallet.40ef7dbb.js";const z=()=>{var g;const v=F(),{id:f}=q(),x=m($),a=m(B),h=m(I),{signAndInternal:i,owners:u,refetch:w,confirmTransaction:O,revokeTransaction:E,isLoading:T}=K(),e=h==null?void 0:h.find(s=>s.id===parseInt(f)),{GetCoins:N}=M(),k=m(P),p=U(),[l,L]=C.exports.useState({});C.exports.useEffect(()=>{e&&L({requiredCount:e.requiredCount,owner:e.owner,newOwner:e.newOwner,valueOfTransfer:e.valueOfTransfer,method:e.method})},[e]);const S=async()=>{var s,t,o,d;if(e!=null&&e.confirmations.includes(a.accountAddress))try{await E(x,f),w()}catch(n){console.error(n),p(b({activate:!0,text:(d=n==null?void 0:n.data)==null?void 0:d.message}))}else try{await O(x,parseInt(f)),((t=(s=e==null?void 0:e.confirmations)==null?void 0:s.length)!=null?t:0)-1===(i==null?void 0:i.sign)&&v("/dashboard/transactions"),w()}catch(n){console.error(n),p(b({activate:!0,text:(o=n==null?void 0:n.data)==null?void 0:o.message}))}};return e?c("div",{className:"flex w-[60%] my-14 mx-auto",children:[c("div",{className:"flex flex-col w-full space-y-10 flex-wrap",children:[c("div",{className:"flex flex-col space-y-3",children:[r("div",{className:"font-bold text-lg",children:"Transaction Status"}),c("div",{children:["Transaction requires the confirmation of ",c("span",{className:"font-semibold",children:[(g=e==null?void 0:e.method)!=null&&g.toLowerCase().includes("transfer")?i==null?void 0:i.sign:i==null?void 0:i.internalSigns," out of ",u==null?void 0:u.length," owners"]})]})]}),r("div",{className:"flex flex-wrap items-center justify-center gap-y-5",children:u==null?void 0:u.map((s,t,o)=>c("div",{className:"flex flex-col   gap-4 items-center justify-center w-[7.5rem]",title:s,children:[r("div",{className:`w-[2.188rem] shadow-custom h-[2.188rem] relative ${s.toLowerCase()===a.accountAddress.toLowerCase()?"bg-[#3EBE11]":""} ${t!==0?"before:-translate-x-full before:absolute before:top-1/2 before:w-full before:h-[0.125rem] before:bg-black":""} ${t!==o.length-1?"after:translate-x-[70%] after:absolute after:top-1/2 after:w-[150%] after:h-[0.125rem] after:bg-black ":""} rounded-full ${e!=null&&e.confirmations.includes(s)?"bg-[#0055FF]":"bg-[#E90D0D]"}`}),r("div",{className:"truncate max-w-[7.5rem] font-semibold",children:s.toLowerCase()!==a.accountAddress.toLowerCase()?s.split("").reduce((d,n,y,j)=>y<6||j.length-y<3?d+n:d.split(".").length-1<6?d+".":d,""):"You"}),r("div",{className:"h-[1.563rem]",children:s.toLowerCase()!==a.accountAddress.toLowerCase()?e!=null&&e.confirmations.includes(s)?"Approved":"Pending":""})]},s))}),c("div",{className:"shadow-custom w-full px-10 py-5",children:[r("div",{className:"text-xl font-semibold pb-5",children:"Transaction Detail"}),c("div",{className:"grid",style:{gridTemplateColumns:`repeat(${Object.values(l).filter(s=>s).length}, minmax(0, 1fr))`},children:[l.method?r("div",{className:"py-3 border-b border-black",children:"Action Name"}):null,l.valueOfTransfer?r("div",{className:"py-3 border-b border-black",children:"Amount"}):null,l.owner?r("div",{className:"py-3 border-b border-black",children:l.newOwner?"Old":"Address"}):null,l.newOwner?r("div",{className:" py-3 border-b border-black",children:"New"}):null,l.requiredCount?r("div",{className:" py-3 border-b border-black",children:"New Signature Threshold"}):null,l.method?r("div",{className:" pt-3",children:l.method.split("").reduce((s,t,o)=>o===0?s+t.toUpperCase():t!==t.toLowerCase()&&o>0?s+" "+t:s+t,"")}):null,l.valueOfTransfer&&N?c("div",{className:"flex space-x-3 items-center pt-3",children:[r("div",{children:r("img",{src:Object.values(N).find(s=>s.contractAddress.toLowerCase()===(e==null?void 0:e.destination.toLowerCase())).coinUrl,alt:"",className:"w-[1.563rem] h-[1.563rem]"})}),r("div",{children:l.valueOfTransfer})]}):null,l.owner?r("div",{className:" pt-3 text-sm truncate",title:l.owner,children:l.owner}):null,l.newOwner?r("div",{className:" pt-3 text-sm truncate",title:l.newOwner,children:l.newOwner}):null,l.requiredCount?r("div",{className:" pt-3 text-sm",title:l.requiredCount,children:+l.requiredCount}):null]})]}),c("div",{className:"flex justify-center space-x-5",children:[r("div",{children:r(A,{version:"second",className:"px-5 !py-2 w-[7.813rem]",onClick:()=>v(-1),children:"Back"})}),e!=null&&e.executed?r("div",{className:"px-5 text-primary font-semibold",children:"Already Executed"}):r("div",{children:r(A,{onClick:S,isLoading:T,className:`${e!=null&&e.confirmations.includes(a.accountAddress)?"bg-[#EF2727] border-[#EF2727]":"bg-[#2D5EFF] border-[#2D5EFF] hover:border-primary"} border-2 text-white px-5 !py-2 rounded-xl w-[7.813rem]`,children:e!=null&&e.confirmations.includes(a.accountAddress)?"Revoke":"Approve"})})]})]}),k&&r(Q,{onClose:s=>p(b({activate:s,text:""}))})]}):c("div",{className:"w-full h-screen flex items-center justify-center",children:[" ",r("div",{children:r(G.ClipLoader,{})})]})};export{z as default};
